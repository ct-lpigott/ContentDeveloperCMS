webpackJsonp([0,3],{139:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){}return t.prototype.transform=function(t,e){var n=[];for(var r in t)null==e?(n.push({}),n[n.length-1][r]=t[r]):"keys"==e?n.push(r):"values"==e&&n.push(t[r]);return n},t=o([n.i(r.p)({name:"keyValArray"}),i("design:paramtypes",[])],t)}()},19:function(t,e,n){"use strict";var r=n(0),o=n(288),i=n(23),s=(n.n(i),n(306)),c=n(139),a=n(700),l=(n.n(a),n(701)),u=(n.n(l),n(702)),p=(n.n(u),n(699));n.n(p);n.d(e,"a",function(){return h});var d=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},f=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},h=function(){function t(t,e,n){this._http=t,this._coPipe=e,this._kvaPipe=n,this._serverUrl="./..",this._contentErrors={},this._activeSessionIntervalSeconds=5,this._serverSessionMaxSeconds=1800,this._warnTimeoutAt=.8,this._headers=new o.b,this._headers.append("Content-Type","application/json")}return t.prototype.setupLogoutCallback=function(t){this._notifyAppComponentOfLogout=t},t.prototype.setTimoutWarningCallback=function(t){this._notifyAppComponentOfImpendingTimeout=t},t.prototype.getLoginUrl=function(){var t=this._serverUrl+"/admin/loginUrl",e=this._http.get(t).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t)||"Unknown error getting login url"}).do(function(t){return t.loginUrl});return e},t.prototype.loadUser=function(){var t=this,e=this._serverUrl+"/admin/user",n=this._http.get(e).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t)||"Unknown error getting users details"}).do(function(e){e.loginRequired?t.logout():(t._resetIntervalTimer(),t._activeSessionInterval=setInterval(function(){if(t._activeSessionTime+=t._activeSessionIntervalSeconds,t._activeSessionTime>t._serverSessionMaxSeconds&&(t._stopIntervalTimer(),t._notifyAppComponentOfImpendingTimeout(0,!0),console.log("Your session has expired")),t._activeSessionTime>t._serverSessionMaxSeconds*t._warnTimeoutAt){var e=(t._serverSessionMaxSeconds-t._activeSessionTime)/60;t._notifyAppComponentOfImpendingTimeout(e,!1)}},1e3*t._activeSessionIntervalSeconds),t._currentUser=e.user)});return n},t.prototype.logout=function(){var t=this;this._stopIntervalTimer();var e=this._serverUrl+"/admin/logout",n=this._http.get(e).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t)||"Unknown error when logging user out"});n.subscribe(function(e){t._notifyAppComponentOfLogout(),console.log("User logged out")}),this._currentUser=null,this.leaveProject()},t.prototype.loadUserProjects=function(){var t=this,e=this._serverUrl+"/feeds/?action=collaborators",n=this._http.get(e,{headers:this._headers}).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t.json().error)||"Unknown error getting users projects"}).do(function(e){e.loginRequired?t.logout():t._resetIntervalTimer()});return n},t.prototype.loadProjectContentStructureHistory=function(t){var e=this;this._currentProjectId=t;var n=this._serverUrl+"/feeds/"+t+"?include=structure,content,history",r=this._http.get(n,{headers:this._headers}).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t.json().error)||"Unknown error getting project content and structure"}).do(function(t){t.loginRequired?e.logout():(e._resetIntervalTimer(),e._currentProjectContentStructureHistory=t)});return r},t.prototype.loadProjectSettings=function(){var t=this,e=this._serverUrl+"/feeds/"+this._currentProjectId+"?allSettings",n=this._http.get(e,{headers:this._headers}).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t.json().error)}).do(function(e){e.loginRequired?t.logout():(t._resetIntervalTimer(),t._currentProjectSettings=e)});return n},t.prototype.loadAdminSettings=function(){var t=this,e=this._serverUrl+"/admin/settings/"+this._currentProjectId,n=this._http.get(e,{headers:this._headers}).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t.json().error)}).do(function(e){e.loginRequired?t.logout():(t._resetIntervalTimer(),null!=e&&null!=t._currentProjectSettings&&(t._currentProjectSettings.update_origins=e.update_origins,t._currentProjectSettings.read_origins=e.read_origins,t._currentProjectSettings.public_auth_token=e.public_auth_token))});return n},t.prototype.loadProjectMediaItems=function(t,e){var n=this;void 0===e&&(e=null);var r=this._serverUrl+"/feeds/"+this._currentProjectId+"?action=mediaItems&numFiles="+t+"&nextPageToken="+e,o=this._http.get(r,{headers:this._headers}).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t.json().error)||"Unknown error updating project access level"}).do(function(t){t.loginRequired?n.logout():n._resetIntervalTimer()});return o},t.prototype.refreshProjectHistory=function(){var t=this,e=this._serverUrl+"/feeds/"+this._currentProjectId+"?include=history",n=this._http.get(e,{headers:this._headers}).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t.json().error)||"Unknown error refreshing project history"}).do(function(e){e.loginRequired?t.logout():(t._resetIntervalTimer(),null!=t._currentProjectContentStructureHistory&&null!=e&&(t._currentProjectContentStructureHistory.content_history=e.content_history,t._currentProjectContentStructureHistory.structure_hisory=e.structure_history))});return n},t.prototype.getContentofCommit=function(t,e){var n=this,r=this._serverUrl+"/feeds/"+this._currentProjectId+"?action=previewCommit&commitHash="+t+"&historyOf="+e,o=this._http.get(r,{headers:this._headers}).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t.json().error)||"Unknown error getting commit content"}).do(function(t){t.loginRequired?n.logout():n._resetIntervalTimer()});return o},t.prototype.updateAdminSettings=function(t,e){var n=this;void 0===t&&(t=null),void 0===e&&(e=null);var r=this._serverUrl+"/admin/settings/"+this._currentProjectId,o=this._http.put(r,{update_origins:t,read_origins:e},{headers:this._headers}).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t.json().error)}).do(function(t){t.loginRequired?n.logout():(n._resetIntervalTimer(),console.log("Admin settings updated!!"))});return o},t.prototype.updateProjectSettings=function(t,e,n){var r=this;void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null);var o=this._serverUrl+"/feeds/"+this._currentProjectId+"?allSettings",s=this._http.put(o,{project_name:t,max_cache_age:e,custom_css:n},{headers:this._headers}).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t.json().error)}).do(function(t){t.loginRequired?r.logout():(r._resetIntervalTimer(),console.log("Project settings updated!!"))});return s},t.prototype.generateNewPublicAuthToken=function(t){var e=this,n=this._serverUrl+"/admin/settings/"+this._currentProjectId+"/publicAuthToken",r=this._http.put(n,{public_auth_token:t},{headers:this._headers}).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t.json().error)}).do(function(t){t.loginRequired?e.logout():(e._resetIntervalTimer(),t.success&&(e._currentProjectSettings.public_auth_token=t.public_auth_token,console.log("New public auth token generated!!")))});return r},t.prototype.updateProjectStructure=function(t,e){var n=this;void 0===e&&(e=null);var r=this._serverUrl+"/feeds/"+this._currentProjectId,o=this._http.put(r,{structure:t,commit_message:e},{headers:this._headers}).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t.json().error)||"Unknown error updating project structure"}).do(function(t){t.loginRequired?n.logout():(n._resetIntervalTimer(),null!=t&&(n._currentProjectContentStructureHistory.structure=t.structure))});return o},t.prototype.updateProjectContent=function(t,e,n){var r=this;if(void 0===e&&(e=null),void 0===n&&(n=""),0==this._kvaPipe.transform(this._contentErrors,"values").length){var o=this._serverUrl+"/feeds/"+this._currentProjectId+"/"+n,s=this._http.put(o,{content:t,commit_message:e},{headers:this._headers}).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t.json().error)||"Unknown error updating project content"}).do(function(t){t.loginRequired?r.logout():(r._resetIntervalTimer(),null!=t&&null!=r._currentProjectContentStructureHistory&&(r._currentProjectContentStructureHistory.content=t.content))});return s}return null},t.prototype.updateCollaborator=function(t,e){var n=this,r=this._serverUrl+"/feeds/"+this._currentProjectId+"?action=collaborators",o=this._http.put(r,{collaborator_id:t,access_level_int:e},{headers:this._headers}).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t.json().error)||"Unknown error adding new collaborator to project"}).do(function(t){t.loginRequired?n.logout():(n._resetIntervalTimer(),t.success&&console.log("Collaborator Updated"))});return o},t.prototype.updateAccessLevel=function(t,e){var n=this,r=this._serverUrl+"/feeds/"+this._currentProjectId+"?action=accessLevels",o=this._http.put(r,{access_level_int:t,access_level_name:e},{headers:this._headers}).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t.json().error)||"Unknown error updating project access level"}).do(function(t){t.loginRequired?n.logout():(n._resetIntervalTimer(),t.success&&console.log("Access Level Updated Updated"))});return o},t.prototype.createNewProject=function(t,e){var n=this;void 0===e&&(e="");var r=this._serverUrl+"/feeds/?action=createProject",o=this._http.post(r,{project_name:t,template:e},{headers:this._headers}).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t.json().error)||"Unknown error creating project content"}).do(function(t){t.loginRequired?n.logout():n._resetIntervalTimer()});return o},t.prototype.createProjectContent=function(t,e){var n=this;void 0===e&&(e="");var r=this._serverUrl+"/feeds/"+this._currentProjectId+"/"+e,o=this._http.post(r,{content:t},{headers:this._headers}).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t.json().error)||"Unknown error creating project content"}).do(function(t){t.loginRequired?n.logout():(n._resetIntervalTimer(),console.log("Project content created"))});return o},t.prototype.addNewCollaborator=function(t,e){var n=this,r=this._serverUrl+"/feeds/"+this._currentProjectId+"?action=collaborators",o=this._http.post(r,{email:t,access_level_int:e},{headers:this._headers}).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t.json().error)||"Unknown error adding new collaborator to project"}).do(function(t){t.loginRequired?n.logout():t.success&&(n._resetIntervalTimer(),console.log("New Collaborator Added"))});return o},t.prototype.createAccessLevel=function(t,e){var n=this,r=this._serverUrl+"/feeds/"+this._currentProjectId+"?action=accessLevels",o=this._http.post(r,{access_level_int:t,access_level_name:e},{headers:this._headers}).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t.json().error)||"Unknown error creating project access level"}).do(function(t){t.loginRequired?n.logout():(n._resetIntervalTimer(),t.success&&console.log("Access Level Created"))});return o},t.prototype.uploadMediaItem=function(t){var e=this,n=new FormData;n.append("file",t);var r=this._serverUrl+"/feeds/"+this._currentProjectId+"?action=mediaItems",o=this._http.post(r,n).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t)||"Unknown error uploading media item"}).do(function(t){t.loginRequired?e.logout():(e._resetIntervalTimer(),null!=t.media_item_url&&console.log("Media item successfully uploaded"))});return o},t.prototype.removeCollaborator=function(t){var e=this,n=this._serverUrl+"/feeds/"+this._currentProjectId+"?action=collaborators",r=this._http.delete(n+"&collaborator_id="+t,{headers:this._headers}).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t.json().error)||"Unknown error adding new collaborator to project"}).do(function(t){t.loginRequired?e.logout():(e._resetIntervalTimer(),t.success&&console.log("Collaborator Removed"))});return r},t.prototype.deleteProject=function(t){var e=this,n=this._serverUrl+"/admin/"+this._currentProjectId,r=this._http.delete(n+"?projectName="+t,{headers:this._headers}).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t.json().error)||"Unknown error deleting project"}).do(function(t){t.loginRequired?e.logout():(e._resetIntervalTimer(),t.success&&(console.log("Project deleted"),e.leaveProject()))});return r},t.prototype.deleteAccessLevel=function(t){var e=this;if(t>3){var n=this._serverUrl+"/feeds/"+this._currentProjectId+"?action=accessLevels",r=this._http.delete(n+"&access_level_int="+t,{headers:this._headers}).map(function(t){return t.json()}).catch(function(t){return i.Observable.throw(t.json().error)||"Unknown error deleting project access level"}).do(function(t){t.loginRequired?e.logout():(e._resetIntervalTimer(),t.success&&console.log("Access Level deleted"))});return r}},t.prototype.getCurrentUser=function(){return this._currentUser},t.prototype.getCurrentProjectId=function(){return this._currentProjectId},t.prototype.getCurrentProjectContent=function(){var t=null;return null!=this._currentProjectContentStructureHistory&&null!=this._currentProjectContentStructureHistory.content&&(t=this._coPipe.transform(this._currentProjectContentStructureHistory.content)),t},t.prototype.getCurrentProjectStructure=function(){var t=null;return null!=this._currentProjectContentStructureHistory&&null!=this._currentProjectContentStructureHistory.structure&&(t=this._coPipe.transform(this._currentProjectContentStructureHistory.structure)),t},t.prototype.getCurrentProjectSettings=function(){var t=null;return null!=this._currentProjectSettings&&(t=this._coPipe.transform(this._currentProjectSettings)),t},t.prototype.getCurrentProjectContentHistory=function(){var t=null;return null!=this._currentProjectContentStructureHistory&&null!=this._currentProjectContentStructureHistory.content_history&&(t=this._currentProjectContentStructureHistory.content_history.slice()),t},t.prototype.getCurrentProjectStructureHistory=function(){var t=null;return null!=this._currentProjectContentStructureHistory&&null!=this._currentProjectContentStructureHistory.structure_history&&(t=this._currentProjectContentStructureHistory.structure_history.slice()),t},t.prototype.getContentErrors=function(){return this._coPipe.transform(this._contentErrors)},t.prototype.updateContentError=function(t,e){this._contentErrors[t]=e},t.prototype.deleteContentError=function(t){delete this._contentErrors[t]},t.prototype.leaveProject=function(){this._currentProjectId=null,this._currentProjectContentStructureHistory=null,this._currentProjectSettings=null},t.prototype._resetIntervalTimer=function(){this._activeSessionTime=0},t.prototype._stopIntervalTimer=function(){this._resetIntervalTimer(),null!=this._activeSessionInterval&&(clearInterval(this._activeSessionInterval),this._activeSessionInterval=null)},t=d([n.i(r.c)(),f("design:paramtypes",["function"==typeof(e="undefined"!=typeof o.c&&o.c)&&e||Object,"function"==typeof(a="undefined"!=typeof s.a&&s.a)&&a||Object,"function"==typeof(l="undefined"!=typeof c.a&&c.a)&&l||Object])],t);var e,a,l}()},202:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){}return t.prototype.transform=function(t,e,n){void 0===n&&(n=2);var r=null;if("parse"==e)try{r=JSON.parse(t)}catch(t){}else if("stringify"==e)try{r=JSON.stringify(t,null,n)}catch(t){}return r},t=o([n.i(r.p)({name:"customJson"}),i("design:paramtypes",[])],t)}()},306:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){}return t.prototype.transform=function(t){var e=JSON.stringify(t),n=JSON.parse(e);return n},t=o([n.i(r.p)({name:"cloneObject"}),i("design:paramtypes",[])],t)}()},307:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){}return t.prototype.transform=function(t){var e=t<10?"0"+t:""+t;return e},t=o([n.i(r.p)({name:"doubleDigit"}),i("design:paramtypes",[])],t)}()},308:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){}return t.prototype.transform=function(t,e){return t.slice(0,e)},t=o([n.i(r.p)({name:"shortener"}),i("design:paramtypes",[])],t)}()},309:function(t,e,n){"use strict";var r=n(0),o=n(311),i=n(310);n.d(e,"a",function(){return a});var s=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=function(){function t(t,e){this._utsPipe=t,this._uccPipe=e}return t.prototype.transform=function(t){t+="";var e=this._utsPipe.transform(t),n=this._uccPipe.transform(e);return n},t=s([n.i(r.p)({name:"title"}),c("design:paramtypes",["function"==typeof(e="undefined"!=typeof i.a&&i.a)&&e||Object,"function"==typeof(a="undefined"!=typeof o.a&&o.a)&&a||Object])],t);var e,a}()},310:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){}return t.prototype.transform=function(t){return t+="",t.replace(/_/g," ")},t=o([n.i(r.p)({name:"underscoreToSpace"}),i("design:paramtypes",[])],t)}()},311:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){}return t.prototype.transform=function(t,e){void 0===e&&(e=!1),t+="";for(var n="",r=e?t.split(" ").slice(0,1):t.split(" "),o=0,i=r;o<i.length;o++){var s=i[o];n+=s[0].toUpperCase()+s.slice(1)+" "}return n},t=o([n.i(r.p)({name:"upperCamelCase"}),i("design:paramtypes",[])],t)}()},353:function(t,e){function n(t){throw new Error("Cannot find module '"+t+"'.")}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=353},354:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(n(491),n(440)),o=n(0),i=n(490),s=n(461);i.a.production&&n.i(o.a)(),n.i(r.a)().bootstrapModule(s.a)},460:function(t,e,n){"use strict";var r=n(0),o=n(19);n.d(e,"a",function(){return c});var i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this._cdService=t,this.pageTitle="Content Developer CMS",this.sessionMinutesRemaining=-1,this.sessionExpired=!1,this._sessionWarningDismissed=!1}return t.prototype.ngOnInit=function(){var t=this;this._cdService.setupLogoutCallback(function(){t.loginRequired()}),this._cdService.setTimoutWarningCallback(function(e,n){(n||0==t._sessionWarningDismissed)&&(t.sessionMinutesRemaining=e,t.sessionExpired=n)}),this._cdService.loadUser().subscribe(function(e){e.loginRequired?t.loginRequired():(t.sessionMinutesRemaining=-1,t.sessionExpired=!1,t._sessionWarningDismissed=!1,t.user=t._cdService.getCurrentUser(),null==t.user.displayName?t.loginRequired():t.updatePageTitle("My Projects"))})},t.prototype.requestToDismissTimeoutWarning=function(){this.sessionExpired&&(this.sessionExpired=!1,this.logout()),this._sessionWarningDismissed=!0,this.sessionMinutesRemaining=-1},t.prototype.logout=function(){this._cdService.logout(),this.loginRequired()},t.prototype.updatePageTitle=function(t){this.pageTitle=t},t.prototype.loginRequired=function(){this.user=null,this.updatePageTitle("Content Developer CMS")},t=i([n.i(r.U)({selector:"app-root",template:n(670),styles:[n(644)]}),s("design:paramtypes",["function"==typeof(e="undefined"!=typeof o.a&&o.a)&&e||Object])],t);var e}()},461:function(t,e,n){"use strict";var r=n(194),o=n(0),i=n(431),s=n(288),c=n(139),a=n(202),l=n(306),u=n(311),p=n(310),d=n(309),f=n(308),h=n(489),v=n(307),g=n(19),m=n(476),y=n(460),b=n(468),_=n(462),j=n(465),w=n(487),C=n(486),S=n(473),R=n(472),P=n(471),O=n(464),I=n(474),T=n(463),k=n(485),q=n(480),A=n(466),x=n(481),E=n(482),L=n(478),D=n(470),G=n(467),U=n(484),N=n(483),H=n(469),M=n(477),$=n(475),V=n(479),J=n(488);n.d(e,"a",function(){return W});var F=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},B=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},W=function(){function t(){}return t=F([n.i(o.b)({declarations:[y.a,b.a,_.a,j.a,w.a,C.a,S.a,c.a,R.a,P.a,a.a,O.a,I.a,T.a,k.a,l.a,u.a,p.a,d.a,q.a,f.a,h.a,v.a,A.a,x.a,E.a,L.a,D.a,G.a,U.a,N.a,H.a,M.a,$.a,m.a,V.a,J.a],imports:[r.a,i.a,s.a],providers:[g.a,a.a,l.a,u.a,p.a,d.a,f.a,h.a,v.a,c.a],bootstrap:[y.a]}),B("design:paramtypes",[])],t)}()},462:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.adminNotifyingOfProjectDeletion=new r.G,this.adminRequestToSaveStructure=new r.G,this.adminRequestToResetStructure=new r.G,this.adminRequestToSaveContent=new r.G,this.adminRequestToResetContent=new r.G,this.adminRequestToRefreshSettings=new r.G,this.adminRequestToDismissErrors=new r.G,this._view="structure"}return t.prototype.changeView=function(t){this._view=t},t.prototype.viewRequestToSaveStructure=function(t){this.adminRequestToSaveStructure.emit(t),this.changeView("structure")},t.prototype.viewRequestToSaveContent=function(t){void 0===t&&(t=null),this.adminRequestToSaveContent.emit(t),this.changeView("content")},t.prototype.resetContent=function(){this.adminRequestToResetContent.emit()},t.prototype.viewRequestToResetStructure=function(){this.adminRequestToResetStructure.emit()},t.prototype.viewRequestToResetContent=function(){this.adminRequestToResetContent.emit()},t.prototype.viewRequestToRefreshSettings=function(){this.adminRequestToRefreshSettings.emit()},t.prototype.viewNotifyingOfProjectDeletion=function(){this.adminNotifyingOfProjectDeletion.emit()},t.prototype.requestToDismissErrors=function(){this.adminRequestToDismissErrors.emit()},o([n.i(r.w)(),i("design:type",Object)],t.prototype,"projectStructure",void 0),o([n.i(r.w)(),i("design:type",Object)],t.prototype,"projectContent",void 0),o([n.i(r.w)(),i("design:type",Object)],t.prototype,"projectStructureHistory",void 0),o([n.i(r.w)(),i("design:type",Object)],t.prototype,"projectContentHistory",void 0),o([n.i(r.w)(),i("design:type",Object)],t.prototype,"projectSettings",void 0),o([n.i(r.w)(),i("design:type",Array)],t.prototype,"errors",void 0),o([n.i(r.T)(),i("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"adminNotifyingOfProjectDeletion",void 0),o([n.i(r.T)(),i("design:type","function"==typeof(s="undefined"!=typeof r.G&&r.G)&&s||Object)],t.prototype,"adminRequestToSaveStructure",void 0),o([n.i(r.T)(),i("design:type","function"==typeof(c="undefined"!=typeof r.G&&r.G)&&c||Object)],t.prototype,"adminRequestToResetStructure",void 0),o([n.i(r.T)(),i("design:type","function"==typeof(a="undefined"!=typeof r.G&&r.G)&&a||Object)],t.prototype,"adminRequestToSaveContent",void 0),o([n.i(r.T)(),i("design:type","function"==typeof(l="undefined"!=typeof r.G&&r.G)&&l||Object)],t.prototype,"adminRequestToResetContent",void 0),o([n.i(r.T)(),i("design:type","function"==typeof(u="undefined"!=typeof r.G&&r.G)&&u||Object)],t.prototype,"adminRequestToRefreshSettings",void 0),o([n.i(r.T)(),i("design:type","function"==typeof(p="undefined"!=typeof r.G&&r.G)&&p||Object)],t.prototype,"adminRequestToDismissErrors",void 0),t=o([n.i(r.U)({selector:"app-cms-admin",template:n(671),styles:[n(645)]}),i("design:paramtypes",[])],t);var e,s,c,a,l,u,p}()},463:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.viewRequestToSaveStructure=new r.G,this.viewRequestToSaveContent=new r.G}return t.prototype.revertToCommit=function(t){var e={commit_message:t.commit_message};switch(e[t.for]=t.object,t.for){case"structure":this.viewRequestToSaveStructure.emit(e);break;case"content":this.viewRequestToSaveContent.emit(e)}},o([n.i(r.w)(),i("design:type",Object)],t.prototype,"projectStructureHistory",void 0),o([n.i(r.w)(),i("design:type",Object)],t.prototype,"projectContentHistory",void 0),o([n.i(r.T)(),i("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"viewRequestToSaveStructure",void 0),o([n.i(r.T)(),i("design:type","function"==typeof(s="undefined"!=typeof r.G&&r.G)&&s||Object)],t.prototype,"viewRequestToSaveContent",void 0),t=o([n.i(r.U)({selector:"app-history-view",template:n(672),styles:[n(646)]}),i("design:paramtypes",[])],t);var e,s}()},464:function(t,e,n){"use strict";var r=n(0),o=n(202);n.d(e,"a",function(){return c});var i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this._jsPipe=t,this.viewRequestToSaveStructure=new r.G,this.viewRequestToResetStructure=new r.G}return t.prototype.ngOnChanges=function(t){t.projectStructure&&(this.projectStructureJson=this._jsPipe.transform(this.projectStructure,"stringify"),null!=this.projectStructureJson&&(this.projectStructureJson=this.projectStructureJson.split()))},t.prototype.codeUpdated=function(t){this.projectStructure=t},t.prototype.resetProjectStructure=function(){this.viewRequestToResetStructure.emit()},t.prototype.saveProjectStructure=function(t){if(null!=this.projectStructure){var e={structure:this.projectStructure,commit_message:null!=t?t:null};this.viewRequestToSaveStructure.emit(e)}},t.prototype.structureCollectionTabsReordered=function(t){this.projectStructure=t,this.projectStructureJson=this._jsPipe.transform(this.projectStructure,"stringify")},i([n.i(r.w)(),s("design:type",Object)],t.prototype,"projectStructure",void 0),i([n.i(r.T)(),s("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"viewRequestToSaveStructure",void 0),i([n.i(r.T)(),s("design:type","function"==typeof(c="undefined"!=typeof r.G&&r.G)&&c||Object)],t.prototype,"viewRequestToResetStructure",void 0),t=i([n.i(r.U)({selector:"app-structure-view",template:n(673),styles:[n(647)]}),s("design:paramtypes",["function"==typeof(a="undefined"!=typeof o.a&&o.a)&&a||Object])],t);
var e,c,a}()},465:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.editorRequestToSaveContent=new r.G,this.editorRequestToResetContent=new r.G,this.editorRequestToRefreshSettings=new r.G,this.editorRequestToDismissErrors=new r.G,this._view="content"}return t.prototype.changeView=function(t){this._view=t},t.prototype.previewCommit=function(t){this.projectContent=t.data,this.changeView("content")},t.prototype.viewRequestToSaveContent=function(t){void 0===t&&(t=null),this.editorRequestToSaveContent.emit(t)},t.prototype.viewRequestToResetContent=function(){this.editorRequestToResetContent.emit()},t.prototype.viewRequestToRefreshSettings=function(){this.editorRequestToRefreshSettings.emit()},t.prototype.requestToDismissErrors=function(){this.editorRequestToDismissErrors.emit()},o([n.i(r.w)(),i("design:type",Object)],t.prototype,"projectContent",void 0),o([n.i(r.w)(),i("design:type",Object)],t.prototype,"projectStructure",void 0),o([n.i(r.w)(),i("design:type",Object)],t.prototype,"projectSettings",void 0),o([n.i(r.w)(),i("design:type",Object)],t.prototype,"projectContentHistory",void 0),o([n.i(r.w)(),i("design:type",Number)],t.prototype,"userAccessLevel",void 0),o([n.i(r.w)(),i("design:type",Object)],t.prototype,"customCss",void 0),o([n.i(r.w)(),i("design:type",Array)],t.prototype,"errors",void 0),o([n.i(r.T)(),i("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"editorRequestToSaveContent",void 0),o([n.i(r.T)(),i("design:type","function"==typeof(s="undefined"!=typeof r.G&&r.G)&&s||Object)],t.prototype,"editorRequestToResetContent",void 0),o([n.i(r.T)(),i("design:type","function"==typeof(c="undefined"!=typeof r.G&&r.G)&&c||Object)],t.prototype,"editorRequestToRefreshSettings",void 0),o([n.i(r.T)(),i("design:type","function"==typeof(a="undefined"!=typeof r.G&&r.G)&&a||Object)],t.prototype,"editorRequestToDismissErrors",void 0),t=o([n.i(r.U)({selector:"app-cms-editor",template:n(674),styles:[n(648)]}),i("design:paramtypes",[])],t);var e,s,c,a}()},466:function(t,e,n){"use strict";var r=n(0),o=n(19);n.d(e,"a",function(){return c});var i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this._cdService=t,this.viewProject=new r.G,this.viewLoginRequired=new r.G}return t.prototype.ngOnInit=function(){this.refreshUserProjects()},t.prototype.createNewProject=function(t,e){var n=this;void 0===e&&(e=""),t.value.length>0&&this._cdService.createNewProject(t.value,e).subscribe(function(e){e.loginRequired?n.viewLoginRequired.emit():null!=e&&(n.editProject(e.new_project_id,t.value,1),t.value="")})},t.prototype.editProject=function(t,e,n){var r={projectId:t,projectName:e,userAccessLevel:n};this.viewProject.emit(r)},t.prototype.refreshUserProjects=function(){var t=this;this._cdService.loadUserProjects().subscribe(function(e){e.loginRequired?t.viewLoginRequired.emit():t._userProjects=e})},i([n.i(r.T)(),s("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"viewProject",void 0),i([n.i(r.T)(),s("design:type","function"==typeof(c="undefined"!=typeof r.G&&r.G)&&c||Object)],t.prototype,"viewLoginRequired",void 0),t=i([n.i(r.U)({selector:"app-user-projects",template:n(675),styles:[n(649)]}),s("design:paramtypes",["function"==typeof(a="undefined"!=typeof o.a&&o.a)&&a||Object])],t);var e,c,a}()},467:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){}return o([n.i(r.w)(),i("design:type",Object)],t.prototype,"projectStructure",void 0),o([n.i(r.w)(),i("design:type",Object)],t.prototype,"projectContent",void 0),o([n.i(r.w)(),i("design:type",String)],t.prototype,"customCss",void 0),t=o([n.i(r.U)({selector:"app-cms-view-only",template:n(676),styles:[n(650)]}),i("design:paramtypes",[])],t)}()},468:function(t,e,n){"use strict";var r=n(0),o=n(19);n.d(e,"a",function(){return c});var i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this._cdService=t,this.requestToUpdatePageTitle=new r.G,this.loginRequired=new r.G}return t.prototype.viewProject=function(t){this._projectId=t.projectId,this._projectName=t.projectName,this.userAccessLevel=t.userAccessLevel,this.loadProjectContentAndStructure(),this.loadProjectSettings(),this.updatePageTitle(this._projectName)},t.prototype.updatePageTitle=function(t){this.requestToUpdatePageTitle.emit(t)},t.prototype.dismissErrors=function(){this.errors=[]},t.prototype.viewUserProjects=function(){this._clearProjectVars(),this._cdService.leaveProject(),this.updatePageTitle("My Projects")},t.prototype.loadProjectContentAndStructure=function(){var t=this;this._cdService.loadProjectContentStructureHistory(this._projectId).subscribe(function(e){e.loginRequired?t.loginRequired.emit():(console.log("Project Content and Structure Loaded!"),t.resetProjectStructure(),t.resetProjectContent(),t.resetProjectHistory())})},t.prototype.loadProjectSettings=function(){var t=this;this._cdService.loadProjectSettings().subscribe(function(e){e.loginRequired?t.loginRequired.emit():t._cdService.loadAdminSettings().subscribe(function(e){e.loginRequired?t.loginRequired.emit():t.resetProjectSettings()})})},t.prototype.saveProjectStructure=function(t){var e=this,n=null!=t?t.commit_message:null;this._cdService.updateProjectStructure(t.structure,n).subscribe(function(t){t.loginRequired?e.loginRequired.emit():(console.log("Structure Saved!!"),e.resetProjectStructure(),e.resetProjectHistory()),e.errors=t.errors})},t.prototype.saveProjectContent=function(t){var e=this;void 0===t&&(t=null);var n=null!=t&&null!=t.content?t.content:this.projectContent,r=null!=t?t.commit_message:null,o=this._cdService.updateProjectContent(n,r);null!=o&&o.subscribe(function(t){t.loginRequired?e.loginRequired.emit():(console.log("Content Saved!!"),e.resetProjectContent(),e.resetProjectHistory()),e.errors=t.errors})},t.prototype.refreshProject=function(){this.loadProjectContentAndStructure(),this.loadProjectSettings()},t.prototype.resetProjectContent=function(){this.projectContent=this._cdService.getCurrentProjectContent()},t.prototype.resetProjectStructure=function(){this.projectStructure=this._cdService.getCurrentProjectStructure()},t.prototype.resetProjectSettings=function(){this.projectSettings=this._cdService.getCurrentProjectSettings(),null!=this._projectId&&null!=this.projectSettings?(this._projectName=this.projectSettings.project_name,this.updatePageTitle(this._projectName)):this.loginRequired.emit()},t.prototype.resetProjectHistory=function(){var t=this;this._cdService.refreshProjectHistory().subscribe(function(e){e.loginRequired?t.loginRequired.emit():(console.log("Project History Reset!!"),t.projectContentHistory=e.content_history,t.projectStructureHistory=e.structure_history)})},t.prototype.projectDeleted=function(){this.viewUserProjects()},t.prototype.viewLoginRequired=function(){this.loginRequired.emit()},t.prototype._clearProjectVars=function(){this._projectId=null,this._projectName=null,this.userAccessLevel=null,this.errors=null,this.projectContent=null,this.projectStructure=null,this.projectContentHistory=null,this.projectStructureHistory=null,this.projectSettings=null,this.userAccessLevel=null},i([n.i(r.T)(),s("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"requestToUpdatePageTitle",void 0),i([n.i(r.T)(),s("design:type","function"==typeof(c="undefined"!=typeof r.G&&r.G)&&c||Object)],t.prototype,"loginRequired",void 0),t=i([n.i(r.U)({selector:"app-cms",template:n(677),styles:[n(651)]}),s("design:paramtypes",["function"==typeof(a="undefined"!=typeof o.a&&o.a)&&a||Object])],t);var e,c,a}()},469:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.requestToChangeView=new r.G}return t.prototype.changeView=function(t){this.requestToChangeView.emit(t)},o([n.i(r.w)(),i("design:type",Number)],t.prototype,"userAccessLevel",void 0),o([n.i(r.T)(),i("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"requestToChangeView",void 0),t=o([n.i(r.U)({selector:"app-cms-navigation",template:n(678),styles:[n(652)]}),i("design:paramtypes",[])],t);var e}()},470:function(t,e,n){"use strict";var r=n(0),o=n(202);n.d(e,"a",function(){return c});var i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this._jsPipe=t,this.codeUpdated=new r.G,this.requestToResetProjectStructure=new r.G,this.requestToSaveProjectStructure=new r.G,this._formatJson=!1}return t.prototype.ngDoCheck=function(){null!=this._textarea&&this._textarea.selectionStart==this.codeJson.length&&this._textarea.setSelectionRange(this._cursorPosition,this._cursorPosition),null!=this.codeJson&&this.codeJson instanceof Array&&(this.codeJson=this.codeJson.join())},t.prototype.formatJsonClicked=function(){this._formatJson=!0,this._updateStructureJson()},t.prototype.resetProjectStructureClicked=function(){this.requestToResetProjectStructure.emit()},t.prototype.saveProjectStructureClicked=function(){this.requestToSaveProjectStructure.emit(this._commitMessage),this._commitMessage=null},t.prototype.onKeyUp=function(t){this._updateStructureJson(t)},t.prototype.onKeyDown=function(t){this._textarea=t.target,this._cursorPosition=t.target.selectionStart;var e=!1,n=!1,r=!1,o="";"enter"!=t.key.toLowerCase()&&13!=t.keyCode||(t.preventDefault(),o="\n"),"backspace"!=t.key.toLowerCase()&&8!=t.keyCode||(t.target.selectionEnd-t.target.selectionStart>0?n=!0:e=!0),"tab"!=t.key.toLowerCase()&&9!=t.keyCode||(t.preventDefault(),t.shiftKey?r=!0:o="\t"),this._updateStructureJson(t,o,e,n,r)},t.prototype._updateStructureJson=function(t,e,n,r,o){if(void 0===t&&(t=null),void 0===e&&(e=""),void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o=!1),null!=t)if(r)this.codeJson=this.codeJson.slice(0,t.target.selectionStart)+this.codeJson.slice(t.target.selectionEnd+1),this._cursorPosition=this._cursorPosition>1?this._cursorPosition-1:this._cursorPosition;else if(n)this._cursorPosition=this._cursorPosition>1?this._cursorPosition-1:this._cursorPosition;else if(o){var i=this.codeJson.slice(this._cursorPosition-1,this._cursorPosition);0==i.replace(/\s/g,"").length&&(this.codeJson=this.codeJson.slice(0,this._cursorPosition-1)+this.codeJson.slice(this._cursorPosition),this._cursorPosition=this._cursorPosition>1?this._cursorPosition-1:this._cursorPosition)}else e.length>0?(this.codeJson=this.codeJson.slice(0,this._cursorPosition)+e+this.codeJson.slice(t.target.selectionEnd),this._cursorPosition+=1):this._cursorPosition+=1;var s=this._jsPipe.transform(this.codeJson,"parse");null!=s&&(this.codeUpdated.emit(s),this._formatJson&&(this.codeJson=this._jsPipe.transform(s,"stringify"),this._formatJson=!1))},i([n.i(r.w)(),s("design:type",Object)],t.prototype,"codeJson",void 0),i([n.i(r.T)(),s("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"codeUpdated",void 0),i([n.i(r.T)(),s("design:type","function"==typeof(c="undefined"!=typeof r.G&&r.G)&&c||Object)],t.prototype,"requestToResetProjectStructure",void 0),i([n.i(r.T)(),s("design:type","function"==typeof(a="undefined"!=typeof r.G&&r.G)&&a||Object)],t.prototype,"requestToSaveProjectStructure",void 0),i([n.i(r.V)("keyup",["$event"]),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],t.prototype,"onKeyUp",null),i([n.i(r.V)("keydown",["$event"]),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],t.prototype,"onKeyDown",null),t=i([n.i(r.U)({selector:"app-code-editor",template:n(679),styles:[n(653)]}),s("design:paramtypes",["function"==typeof(l="undefined"!=typeof o.a&&o.a)&&l||Object])],t);var e,c,a,l}()},471:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(t){this._el=t,this.viewOnly=!1,this.itemContentChanged=new r.G}return t.prototype.ngAfterViewInit=function(){this._contentInputElement=this._el.nativeElement.getElementsByClassName("contentInput")[0]},t.prototype.ngDoCheck=function(){null!=this._contentInputElement&&this._contentInputElement.hasAttribute("data-error")?this._contentError=this._contentInputElement.getAttribute("data-error"):this._contentError=null},t.prototype.contentChanged=function(t){void 0===t&&(t=null),null!=t&&"event"!=t.constructor.name.toLowerCase()?this.itemContentChanged.emit({path:this.encapsulationPath,content:t}):this.itemContentChanged.emit({path:this.encapsulationPath,content:this.itemContent})},o([n.i(r.w)(),i("design:type",String)],t.prototype,"itemName",void 0),o([n.i(r.w)(),i("design:type",Object)],t.prototype,"itemStructure",void 0),o([n.i(r.w)(),i("design:type",Object)],t.prototype,"itemContent",void 0),o([n.i(r.w)(),i("design:type",Boolean)],t.prototype,"viewContent",void 0),o([n.i(r.w)(),i("design:type",Boolean)],t.prototype,"viewOnly",void 0),o([n.i(r.w)(),i("design:type",String)],t.prototype,"encapsulationPath",void 0),o([n.i(r.T)(),i("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"itemContentChanged",void 0),t=o([n.i(r.U)({selector:"app-collection-item",template:n(680),styles:[n(654)]}),i("design:paramtypes",["function"==typeof(s="undefined"!=typeof r.C&&r.C)&&s||Object])],t);var e,s}()},472:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.viewOnly=!1,this.topLevelCollection=!1,this.subCollection=!1,this.contentChanged=new r.G}return t.prototype.itemContentChanged=function(t){this.contentChanged.emit(t)},t.prototype.collectionContentChanged=function(t){this.contentChanged.emit(t)},t.prototype.deleteItem=function(t,e){if(this.viewContent&&null!=this.projectContent[this.collection])switch(this.projectContent[this.collection].constructor.name.toLowerCase()){case"array":this.projectContent[this.collection].splice(e,1),this.projectContent[this.collection]=this.projectContent[this.collection].slice(),this.collectionContentChanged({path:t,content:this.projectContent[this.collection]})}},t.prototype.addNewItem=function(t,e){if(this.viewContent&&null!=this.projectStructure[this.collection]&&(null==this.projectContent&&(this.projectContent=this._createNewItem(this.projectStructure)),null==this.projectContent[this.collection]&&(this.projectContent[this.collection]=this._createNewItem(this.projectStructure[this.collection])),null!=this.projectStructure[this.collection].items&&null!=this.projectStructure[this.collection].type&&"array"==this.projectStructure[this.collection].type)){var n=this._createNewItem(this.projectStructure[this.collection].items);this.projectContent[this.collection].push(n),this.projectContent[this.collection]=this.projectContent[this.collection].slice(),this.collectionContentChanged({path:t,content:this.projectContent[this.collection]})}},t.prototype._createNewItem=function(t){var e;if("array"==t.type)e=[];else{e={};for(var n in t)e[n]=null}return e},o([n.i(r.w)(),i("design:type",String)],t.prototype,"collection",void 0),o([n.i(r.w)(),i("design:type",Object)],t.prototype,"projectContent",void 0),o([n.i(r.w)(),i("design:type",Object)],t.prototype,"projectStructure",void 0),o([n.i(r.w)(),i("design:type",Boolean)],t.prototype,"viewContent",void 0),o([n.i(r.w)(),i("design:type",Boolean)],t.prototype,"viewOnly",void 0),o([n.i(r.w)(),i("design:type",Number)],t.prototype,"userAccessLevel",void 0),o([n.i(r.w)(),i("design:type",Object)],t.prototype,"topLevelCollection",void 0),o([n.i(r.w)(),i("design:type",Boolean)],t.prototype,"subCollection",void 0),o([n.i(r.w)(),i("design:type",String)],t.prototype,"encapsulationPath",void 0),o([n.i(r.T)(),i("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"contentChanged",void 0),t=o([n.i(r.U)({selector:"app-collection",template:n(681),styles:[n(655)]}),i("design:paramtypes",[])],t);var e}()},473:function(t,e,n){"use strict";var r=n(0),o=n(19),i=n(139);n.d(e,"a",function(){return a});var s=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=function(){function t(t,e,n){this.el=t,this._kvaPipe=e,this._cdService=n,this.viewOnly=!1,this.viewContent=!0,this.requestToSaveProjectContent=new r.G,this.requestToResetProjectContent=new r.G,this.structureCollectionTabsReordered=new r.G}return t.prototype.ngOnInit=function(){this._contentEditorElement=this.el.nativeElement,this._selectFirstComponent("",!1)},t.prototype.ngOnChanges=function(t){var e=this;if(t.projectStructure&&void 0==this.projectStructure[this.currentCollectionName]&&(this.currentCollectionName=null),t.userAccessLevel&&t.userAccessLevel.currentValue!=t.userAccessLevel.previousValue){3==this.userAccessLevel?this.viewOnly=!0:this.viewOnly=!1;var n=this.currentCollectionName;this.currentCollectionName=null,setTimeout(function(){return e._selectFirstComponent(n)},10)}},t.prototype.ngDoCheck=function(){this._updateErrors()},t.prototype.requestToDismissErrors=function(){this.contentErrors=null},t.prototype.viewCollection=function(t){this.currentCollectionName=t},t.prototype.projectContentChanged=function(t){this.updateProjectContent(this.projectContent,t)},t.prototype.saveProjectContent=function(){this._updateErrors(!0);var t={commit_message:null!=this._commitMessage?this._commitMessage:"Update to content of '"+this.currentCollectionName+"'"};this.requestToSaveProjectContent.emit(t),this._commitMessage=null},t.prototype.resetProjectContent=function(){this.requestToResetProjectContent.emit()},t.prototype.updateProjectContent=function(t,e){if(this.viewContent&&0==this.viewOnly){for(var n=e.path.split("/"),r=0;r<n.length-1;r++)null==t[n[r]]&&(isNaN(n[r+1])?t[n[r]]={}:null!=t&&"array"==t.constructor.name.toLowerCase()||(t[n[r]]=[])),t=t[n[r]];t[n[n.length-1]]=e.content,this.requestToDismissErrors()}},t.prototype.collectionTabsReordered=function(t){this.structureCollectionTabsReordered.emit(t.content)},t.prototype._selectFirstComponent=function(t,e){if(void 0===e&&(e=!0),e){if(null!=this._contentEditorElement){for(var n,r=this._contentEditorElement.getElementsByClassName("collectionTab"),o=0;o<r.length;o++)r[o].getAttribute("data-key")==t&&(n=r[o]);null==n&&null!=r[0]&&(n=r[0]),null!=n&&n.click()}}else if(null==this.currentCollectionName)for(var i in this.projectStructure){this.viewCollection(i);break}},t.prototype._updateErrors=function(t){void 0===t&&(t=!1),this.viewContent&&0==this.viewOnly&&(t||null!=this.contentErrors)&&(this.contentErrors=this._cdService.getContentErrors(),0==this._kvaPipe.transform(this.contentErrors,"values").length&&(this.contentErrors=null))},s([n.i(r.w)(),c("design:type",Boolean)],t.prototype,"viewOnly",void 0),s([n.i(r.w)(),c("design:type",Boolean)],t.prototype,"viewContent",void 0),s([n.i(r.w)(),c("design:type",Number)],t.prototype,"userAccessLevel",void 0),s([n.i(r.w)(),c("design:type",Object)],t.prototype,"projectContent",void 0),s([n.i(r.w)(),c("design:type",Object)],t.prototype,"projectStructure",void 0),s([n.i(r.T)(),c("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"requestToSaveProjectContent",void 0),s([n.i(r.T)(),c("design:type","function"==typeof(a="undefined"!=typeof r.G&&r.G)&&a||Object)],t.prototype,"requestToResetProjectContent",void 0),s([n.i(r.T)(),c("design:type","function"==typeof(l="undefined"!=typeof r.G&&r.G)&&l||Object)],t.prototype,"structureCollectionTabsReordered",void 0),t=s([n.i(r.U)({selector:"app-content-editor",template:n(682),styles:[n(656)]}),c("design:paramtypes",["function"==typeof(u="undefined"!=typeof r.C&&r.C)&&u||Object,"function"==typeof(p="undefined"!=typeof i.a&&i.a)&&p||Object,"function"==typeof(d="undefined"!=typeof o.a&&o.a)&&d||Object])],t);var e,a,l,u,p,d}()},474:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(t){this._containerElement=t,this.viewOnly=!1,this.viewRequestToSaveContent=new r.G,this.viewRequestToResetContent=new r.G}return t.prototype.ngOnInit=function(){this._viewAsAccessLevel=this.userAccessLevel},t.prototype.ngOnChanges=function(t){t.customCss&&(null==this._styleElement&&(this._styleElement=document.createElement("style"),this._containerElement.nativeElement.appendChild(this._styleElement)),this._styleElement.innerHTML=this.customCss)},t.prototype.viewAsAccessLevelChange=function(t){(t>1||1==t&&1==this.userAccessLevel)&&(this._viewAsAccessLevel=parseInt(t))},t.prototype.requestToSaveProjectContent=function(t){this.viewRequestToSaveContent.emit(t)},t.prototype.requestToResetProjectContent=function(){this.viewRequestToResetContent.emit()},o([n.i(r.w)(),i("design:type",Object)],t.prototype,"projectStructure",void 0),o([n.i(r.w)(),i("design:type",Object)],t.prototype,"projectContent",void 0),o([n.i(r.w)(),i("design:type",Object)],t.prototype,"projectAccessLevels",void 0),o([n.i(r.w)(),i("design:type",Number)],t.prototype,"userAccessLevel",void 0),o([n.i(r.w)(),i("design:type",String)],t.prototype,"customCss",void 0),o([n.i(r.w)(),i("design:type",Boolean)],t.prototype,"viewOnly",void 0),o([n.i(r.T)(),i("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"viewRequestToSaveContent",void 0),o([n.i(r.T)(),i("design:type","function"==typeof(s="undefined"!=typeof r.G&&r.G)&&s||Object)],t.prototype,"viewRequestToResetContent",void 0),t=o([n.i(r.U)({selector:"app-content-view",template:n(683),styles:[n(657)]}),i("design:paramtypes",["function"==typeof(c="undefined"!=typeof r.C&&r.C)&&c||Object])],t);var e,s,c}()},475:function(t,e,n){"use strict";var r=n(0),o=n(19);n.d(e,"a",function(){return c});var i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t,e){this._el=t,this._cdService=e,this.viewContent=!0,this.viewOnly=!1,this.fileChanged=new r.G,this._mediaItemGalleryVisible=!1}return t.prototype.ngAfterViewInit=function(){this._fileInputElement=this._el.nativeElement.getElementsByClassName("fileInput")[0]},t.prototype.ngDoCheck=function(){null!=this._fileInputElement&&(null!=this.itemContent?(this._fileInputElement.setAttribute("data-url",this.itemContent),this._contentError=null):this._fileInputElement.removeAttribute("data-url"),this._fileInputElement.hasAttribute("data-error")?this._contentError=this._fileInputElement.getAttribute("data-error"):this._contentError=null)},t.prototype.openFileExplorer=function(){this._fileInputElement.click()},t.prototype.toggleMediaItemGallery=function(){this._mediaItemGalleryVisible=!this._mediaItemGalleryVisible},t.prototype.showMediaItemGallery=function(){this._mediaItemGalleryVisible=!0},t.prototype.hideMediaItemGallery=function(){this._mediaItemGalleryVisible=!1},t.prototype.mediaItemSelected=function(t){this.itemContent=t,this._fileInputElement.setAttribute("data-url",this.itemContent),this.fileChanged.emit(t),this._warning=this._contentError=null,this.hideMediaItemGallery()},t.prototype.fileInputChanged=function(t){var e=this;null!=t.files&&t.files.length>0&&(this._warning="Uploading...",this._cdService.uploadMediaItem(t.files[0]).subscribe(function(t){t.loginRequired?e._cdService.logout():t.success&&e.mediaItemSelected(t.media_item_url)}))},i([n.i(r.w)(),s("design:type",Boolean)],t.prototype,"viewContent",void 0),i([n.i(r.w)(),s("design:type",Boolean)],t.prototype,"viewOnly",void 0),i([n.i(r.w)(),s("design:type",Object)],t.prototype,"itemContent",void 0),i([n.i(r.w)(),s("design:type",Object)],t.prototype,"itemAttributes",void 0),i([n.i(r.w)(),s("design:type",String)],t.prototype,"encapsulationPath",void 0),i([n.i(r.T)(),s("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"fileChanged",void 0),t=i([n.i(r.U)({selector:"app-file-upload",template:n(684),styles:[n(658)]}),s("design:paramtypes",["function"==typeof(c="undefined"!=typeof r.C&&r.C)&&c||Object,"function"==typeof(a="undefined"!=typeof o.a&&o.a)&&a||Object])],t);var e,c,a}()},476:function(t,e,n){"use strict";var r=n(0),o=n(19),i=n(309);n.d(e,"a",function(){return a});var s=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=function(){function t(t,e,n){this._el=t,this._tPipe=e,this._cdService=n}return t.prototype.ngAfterViewInit=function(){this._formElement=this._el.nativeElement},t.prototype.ngDoCheck=function(){if(null!=this._formElement){var t=this._getInputName();if("true"==this._formElement.getAttribute("data-validate")){var e;if(this._formElement.hasAttribute("required")&&this._formElement.validity.valueMissing)e="this is a required field";else if(this._formElement.hasAttribute("max")&&this._formElement.validity.rangeOverflow)e="this exceeds the maximum value of "+this._formElement.getAttribute("max");else if(this._formElement.hasAttribute("min")&&this._formElement.validity.rangeUnderflow)e="this is less than the minimum value of "+this._formElement.getAttribute("min");else if(this._formElement.hasAttribute("maxlength")&&this._formElement.validity.tooLong)e="this exceeds the maximum length of "+this._formElement.getAttribute("maxlength");else if("true"==this._formElement.getAttribute("data-required"))switch(this._formElement.tagName.toLowerCase()){case"div":null!=this._formElement.innerHTML&&0!=this._formElement.innerHTML.length||(e="this is a required field");break;case"input":null!=this._formElement.getAttribute("data-url")&&0!=this._formElement.getAttribute("data-url").length||(e="this is a required field")}else"true"==this._formElement.getAttribute("data-maxlength")&&(null==this._formElement.innerHTML||this._formElement.innerHTML.length>this._formElement.getAttribute("maxlength"))&&(e="this exceeds the maximum length of "+this._formElement.getAttribute("maxlength"));null!=e?(this._cdService.updateContentError(t,e.replace("this","'"+t+"' ")),this._formElement.setAttribute("data-error",e)):(this._cdService.deleteContentError(t),this._formElement.removeAttribute("data-error"))}else this._cdService.deleteContentError(t),this._formElement.removeAttribute("data-error")}},t.prototype.ngOnDestroy=function(){if(null!=this._formElement){var t=this._getInputName();this._cdService.deleteContentError(t),this._formElement.removeAttribute("data-error"),this._formElement=null}},t.prototype._getInputName=function(){var t=this._tPipe.transform(this._formElement.getAttribute("data-name").replace(/\//g," > "));return t},t=s([n.i(r.v)({selector:"[appFormControl]"}),c("design:paramtypes",["function"==typeof(e="undefined"!=typeof r.C&&r.C)&&e||Object,"function"==typeof(a="undefined"!=typeof i.a&&i.a)&&a||Object,"function"==typeof(l="undefined"!=typeof o.a&&o.a)&&l||Object])],t);var e,a,l}()},477:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){
return s});var o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(t){this._el=t,this.wysiwygRequestToViewMediaItems=new r.G,this.wysiwygContentChanged=new r.G}return t.prototype.ngAfterViewInit=function(){this._editableDivElement=this._el.nativeElement.getElementsByClassName("wysiwyg-input")[0],this.updateEditableDivToItemContent()},t.prototype.ngOnChanges=function(t){t.itemContent&&this.updateEditableDivToItemContent()},t.prototype.ngDoCheck=function(){null!=this._editableDivElement&&this._editableDivElement.hasAttribute("data-error")?this._contentError=this._editableDivElement.getAttribute("data-error"):this._contentError=null},t.prototype.updateEditableDivToItemContent=function(){void 0!=this._editableDivElement&&this._editableDivElement.innerHTML.replace(/\"/g,"'")!=this.itemContent&&(this._editableDivElement.innerHTML=this.itemContent,this._editableDivElement.selectionStart=this._editableDivElement.selectionEnd=this._cursorPosition)},t.prototype.undoLastChange=function(){null!=this._lastChange&&(this._editableDivElement.innerHTML=this._lastChange,this._lastChange=null)},t.prototype.updateCursorPosition=function(){this._cursorPosition=this._getCursorPosition(this._editableDivElement),this.updateContent()},t.prototype.updateContent=function(){this.itemContent=this._editableDivElement.innerHTML.toString().replace(/\"/g,"'"),this._editableDivElement.selectionStart=this._editableDivElement.selectionEnd=this._cursorPosition,this.wysiwygContentChanged.emit(this.itemContent)},t.prototype.addImage=function(){this._clearInputs(),this._insertType="image"},t.prototype.addHeading=function(t){this._clearInputs(),this._headingType=t,this._insertType="heading"},t.prototype.addLink=function(){this._clearInputs(),this._insertType="link"},t.prototype.clearAllContent=function(){this._editableDivElement.innerHTML="",this.updateContent(),this._clearInputs()},t.prototype.viewImages=function(){this.wysiwygRequestToViewMediaItems.emit()},t.prototype.imageSelected=function(t){this._imageUrl=t},t.prototype.insertImage=function(t){if(null!=this._imageUrl){var e="<img src='"+this._imageUrl+"' alt='"+t.value+"'>";this.appendToContent(e),this._clearInputs([t])}},t.prototype.insertHeading=function(t){var e="<"+this._headingType+">"+t.value+"</"+this._headingType+">";this.appendToContent(e),this._clearInputs([t])},t.prototype.insertLink=function(t,e){var n="<a href='"+e.value+"'>"+e.value+"</a>";this.appendToContent(n),this._clearInputs([t,e])},t.prototype.appendToContent=function(t){var e=this._editableDivElement.innerHTML;if(this._lastChange=this.itemContent,e.indexOf("<")>-1)for(;e.slice(0,this._cursorPosition).lastIndexOf("<")>e.slice(0,this._cursorPosition).lastIndexOf(">");)this._cursorPosition++;this._editableDivElement.innerHTML=e.slice(0,this._cursorPosition)+t+e.slice(this._cursorPosition),this._editableDivElement.selectionStart=this._editableDivElement.selectionEnd=this._cursorPosition,this.updateContent()},t.prototype.cancel=function(){this._clearInputs()},t.prototype._clearInputs=function(t){void 0===t&&(t=[]),this._insertType=this._headingType=this._imageUrl=null;for(var e=0,n=t;e<n.length;e++){var r=n[e];r.value=""}},t.prototype._getCursorPosition=function(t){var e=null;if(window.getSelection()){var n=window.getSelection();if(n.rangeCount>0){var r="";"range"==n.type.toLowerCase()&&(r=n.toString());for(var o=n.getRangeAt(0),i="",s=0;s<t.childNodes.length;s++){var c=void 0!=t.childNodes[s].outerHTML?t.childNodes[s].outerHTML:t.childNodes[s].textContent;if(t.childNodes[s]==o.endContainer){i+=c.substring(0,o.endOffset);break}i+=c}e=i.length}}return e},o([n.i(r.w)(),i("design:type",Boolean)],t.prototype,"viewContent",void 0),o([n.i(r.w)(),i("design:type",Boolean)],t.prototype,"viewOnly",void 0),o([n.i(r.w)(),i("design:type",Object)],t.prototype,"itemContent",void 0),o([n.i(r.w)(),i("design:type",Object)],t.prototype,"itemAttributes",void 0),o([n.i(r.w)(),i("design:type",Object)],t.prototype,"encapsulationPath",void 0),o([n.i(r.T)(),i("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"wysiwygRequestToViewMediaItems",void 0),o([n.i(r.T)(),i("design:type","function"==typeof(s="undefined"!=typeof r.G&&r.G)&&s||Object)],t.prototype,"wysiwygContentChanged",void 0),t=o([n.i(r.U)({selector:"app-wysiwyg-html",template:n(685),styles:[n(659)]}),i("design:paramtypes",["function"==typeof(c="undefined"!=typeof r.C&&r.C)&&c||Object])],t);var e,s,c}()},478:function(t,e,n){"use strict";var r=n(0),o=n(139);n.d(e,"a",function(){return c});var i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t,e){this._el=t,this._kvaPipe=e,this.contentReordered=new r.G}return t.prototype.ngAfterViewInit=function(){this._containerElement=this._el.nativeElement},t.prototype.onDragStart=function(t){this._dragStartY=t.screenY,t.target.parentNode==this._containerElement&&(this._draggingElement=t.target,this._draggingElement.setAttribute("data-dragging","true"))},t.prototype.onDragOver=function(t){t.preventDefault()},t.prototype.onDragEnter=function(t){t.target.parentNode===this._containerElement&&t.target.setAttribute("data-draggingover","true"),t.stopPropagation()},t.prototype.onDragLeave=function(t){t.target.removeAttribute("data-draggingover")},t.prototype.onDrop=function(t){if(this._draggingElement.removeAttribute("data-dragging"),t.target.removeAttribute("data-draggingover"),null!=this._draggingElement&&t.target.parentNode===this._containerElement){var e=t.screenY<this._dragStartY?-1:1,n={dragDirection:e,keys:{elementDragged:this._draggingElement.getAttribute("data-key"),elementDroppedOn:t.target.getAttribute("data-key")}};this._draggingElement=null,this._dragStartY=null,this._reorderContent(n)}t.stopPropagation()},t.prototype._reorderContent=function(t){if(null!=this.content){var e;e="array"==this.contentType?this._reorderArray(t):this._reorderObject(t);var n={path:this.contentEncapsulationPath,content:e};this.contentReordered.emit(n)}},t.prototype._reorderObject=function(t){var e={},n=this._kvaPipe.transform(this.content,"keys");if(t.dragDirection<0)for(var r=0;r<n.length;r++)n[r]==t.keys.elementDroppedOn?(e[t.keys.elementDragged]=this.content[t.keys.elementDragged],e[t.keys.elementDroppedOn]=this.content[t.keys.elementDroppedOn]):n[r]!=t.keys.elementDragged&&(e[n[r]]=this.content[n[r]]);else if(t.dragDirection>0)for(var r=0;r<n.length;r++)n[r]==t.keys.elementDroppedOn?(e[t.keys.elementDroppedOn]=this.content[t.keys.elementDroppedOn],e[t.keys.elementDragged]=this.content[t.keys.elementDragged]):n[r]!=t.keys.elementDragged&&(e[n[r]]=this.content[n[r]]);return e},t.prototype._reorderArray=function(t){var e=[],n=[];for(var r in this.content)n.push(r);if(t.dragDirection<0)for(var o=!1,i=!1,s=0;s<n.length;s++)n[s]==t.keys.elementDroppedOn?(e[n[s]]=this.content[t.keys.elementDragged],e[n[s+1]]=this.content[t.keys.elementDroppedOn],o=!0,n[s+1]==t.keys.elementDragged&&(i=!0),s++):n[s]==t.keys.elementDragged?(e[n[s]]=this.content[n[s-1]],i=!0):o&&0==i?e[n[s]]=this.content[n[s-1]]:e[n[s]]=this.content[n[s]];else if(t.dragDirection>0)for(var i=!1,o=!1,s=0;s<n.length;s++)n[s+1]==t.keys.elementDroppedOn?(e[n[s]]=this.content[t.keys.elementDroppedOn],e[n[s+1]]=this.content[t.keys.elementDragged],o=!0,s++):n[s]==t.keys.elementDragged?(e[n[s]]=this.content[n[s+1]],i=!0):i&&0==o?e[n[s]]=this.content[n[s+1]]:e[n[s]]=this.content[n[s]];return e},i([n.i(r.w)(),s("design:type",Object)],t.prototype,"content",void 0),i([n.i(r.w)(),s("design:type",String)],t.prototype,"contentEncapsulationPath",void 0),i([n.i(r.w)(),s("design:type",String)],t.prototype,"contentType",void 0),i([n.i(r.T)(),s("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"contentReordered",void 0),i([n.i(r.V)("dragstart",["$event"]),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],t.prototype,"onDragStart",null),i([n.i(r.V)("dragover",["$event"]),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],t.prototype,"onDragOver",null),i([n.i(r.V)("dragenter",["$event"]),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],t.prototype,"onDragEnter",null),i([n.i(r.V)("dragleave",["$event"]),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],t.prototype,"onDragLeave",null),i([n.i(r.V)("drop",["$event"]),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],t.prototype,"onDrop",null),t=i([n.i(r.v)({selector:"app-draggable-container"}),s("design:paramtypes",["function"==typeof(c="undefined"!=typeof r.C&&r.C)&&c||Object,"function"==typeof(a="undefined"!=typeof o.a&&o.a)&&a||Object])],t);var e,c,a}()},479:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.requestToDismissErrors=new r.G}return t.prototype.dismissErrors=function(){this.requestToDismissErrors.emit()},o([n.i(r.w)(),i("design:type",Array)],t.prototype,"errors",void 0),o([n.i(r.T)(),i("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"requestToDismissErrors",void 0),t=o([n.i(r.U)({selector:"app-errors",template:n(686),styles:[n(660)]}),i("design:paramtypes",[])],t);var e}()},480:function(t,e,n){"use strict";var r=n(0),o=n(19),i=n(308);n.d(e,"a",function(){return a});var s=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=function(){function t(t,e){this._cdService=t,this._sPipe=e,this.showPreview=!1,this.revertToCommit=new r.G,this.previewCommit=new r.G}return t.prototype.preview=function(t){var e=this;this._cdService.getContentofCommit(t.hash,this.historyOf).subscribe(function(n){if(n.loginRequired)e._cdService.logout();else if(null!=n)if(e.showPreview)e._previewHistoryObject="structure"==e.historyOf?n.commit_structure:n.commit_content,e._previewHistoryHash=t.hash;else{var r={data:"structure"==e.historyOf?n.commit_structure:n.commit_content,hash:t.hash};e.previewCommit.emit(r)}})},t.prototype.revert=function(){var t={for:this.historyOf,commit_message:"Project "+this.historyOf+" rolled back to commit id: "+this._sPipe.transform(this._previewHistoryHash,6),object:this._previewHistoryObject};this.revertToCommit.emit(t),this.clear()},t.prototype.clear=function(){this._previewHistoryObject=null,this._previewHistoryHash=null},s([n.i(r.w)(),c("design:type",Array)],t.prototype,"history",void 0),s([n.i(r.w)(),c("design:type",String)],t.prototype,"historyOf",void 0),s([n.i(r.w)(),c("design:type",Boolean)],t.prototype,"showPreview",void 0),s([n.i(r.T)(),c("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"revertToCommit",void 0),s([n.i(r.T)(),c("design:type","function"==typeof(a="undefined"!=typeof r.G&&r.G)&&a||Object)],t.prototype,"previewCommit",void 0),t=s([n.i(r.U)({selector:"app-history-display",template:n(687),styles:[n(661)]}),c("design:paramtypes",["function"==typeof(l="undefined"!=typeof o.a&&o.a)&&l||Object,"function"==typeof(u="undefined"!=typeof i.a&&i.a)&&u||Object])],t);var e,a,l,u}()},481:function(t,e,n){"use strict";var r=n(0),o=n(19);n.d(e,"a",function(){return c});var i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this._cdService=t,this.closeButtonClicked=new r.G,this.mediaItemSelected=new r.G}return t.prototype.ngOnInit=function(){this.loadMediaItems()},t.prototype.ngOnChanges=function(t){t.visible&&this.visible&&this.loadMediaItems(!1)},t.prototype.loadMediaItems=function(t){var e=this;void 0===t&&(t=!0);var n=t?this._mediaItemNextPageToken:null;this._cdService.loadProjectMediaItems(this.numItemsPerPage,n).subscribe(function(t){t.loginRequired?e._cdService.logout():(e._mediaItemNextPageToken=t.next_page_token,null!=t.media_items&&(e._mediaItems=t.media_items))})},t.prototype.mediaItemClicked=function(t){this.mediaItemSelected.emit(t)},t.prototype.hide=function(){this.closeButtonClicked.emit()},i([n.i(r.w)(),s("design:type",Number)],t.prototype,"numItemsPerPage",void 0),i([n.i(r.w)(),s("design:type",Number)],t.prototype,"numItemsPerRow",void 0),i([n.i(r.w)(),s("design:type",Boolean)],t.prototype,"visible",void 0),i([n.i(r.T)(),s("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"closeButtonClicked",void 0),i([n.i(r.T)(),s("design:type","function"==typeof(c="undefined"!=typeof r.G&&r.G)&&c||Object)],t.prototype,"mediaItemSelected",void 0),t=i([n.i(r.U)({selector:"app-media-item-gallery",template:n(688),styles:[n(662)]}),s("design:paramtypes",["function"==typeof(a="undefined"!=typeof o.a&&o.a)&&a||Object])],t);var e,c,a}()},482:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.mediaItemClicked=new r.G}return t.prototype.onClick=function(){this.mediaItemClicked.emit(this.mediaItemUrl)},o([n.i(r.w)(),i("design:type",String)],t.prototype,"mediaItemUrl",void 0),o([n.i(r.w)(),i("design:type",String)],t.prototype,"mediaItemName",void 0),o([n.i(r.T)(),i("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"mediaItemClicked",void 0),t=o([n.i(r.U)({selector:"app-media-item",template:n(689),styles:[n(663)]}),i("design:paramtypes",[])],t);var e}()},483:function(t,e,n){"use strict";var r=n(0),o=n(19);n.d(e,"a",function(){return c});var i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this._cdService=t,this.accessLevelsUpdated=new r.G}return t.prototype.addNewAccessLevel=function(t,e){for(var n=this,r=e.value;this._accessLevelExists(r)||r<4;)r++;this._cdService.createAccessLevel(r,t.value).subscribe(function(r){r.loginRequired?n._cdService.logout():r.success&&(console.log("Access level added!!"),e.value=t.value="",n.accessLevelsUpdated.emit())})},t.prototype.deleteAccessLevel=function(t){var e=this;this._cdService.deleteAccessLevel(t).subscribe(function(t){t.loginRequired?e._cdService.logout():t.success&&(console.log("Access level deleted"),e.accessLevelsUpdated.emit())})},t.prototype._accessLevelExists=function(t){for(var e=!1,n=0;n<this.projectSettings.access_levels;n++)this.projectSettings.access_levels[n].access_level_int==t&&(e=!0);return e},i([n.i(r.w)(),s("design:type",Object)],t.prototype,"projectSettings",void 0),i([n.i(r.T)(),s("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"accessLevelsUpdated",void 0),t=i([n.i(r.U)({selector:"app-access-levels",template:n(690),styles:[n(664)]}),s("design:paramtypes",["function"==typeof(c="undefined"!=typeof o.a&&o.a)&&c||Object])],t);var e,c}()},484:function(t,e,n){"use strict";var r=n(0),o=n(19);n.d(e,"a",function(){return c});var i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this._cdService=t,this.collaboratorsUpdated=new r.G}return t.prototype.ngOnInit=function(){var t=this._cdService.getCurrentUser();this._currentUserId=t.id},t.prototype.addCollaborator=function(t,e){var n=this;this._cdService.addNewCollaborator(t.value,e.value).subscribe(function(r){r.loginRequired?n._cdService.logout():r.success&&(console.log("Collaborator added!!"),t.value=e.value="",n.collaboratorsUpdated.emit())})},t.prototype.deleteCollaborator=function(t){var e=this;this._cdService.removeCollaborator(t.user_id).subscribe(function(t){t.loginRequired?e._cdService.logout():t.success&&(console.log("Collaborator removed!!"),e.collaboratorsUpdated.emit())})},i([n.i(r.w)(),s("design:type",Object)],t.prototype,"projectSettings",void 0),i([n.i(r.T)(),s("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"collaboratorsUpdated",void 0),t=i([n.i(r.U)({selector:"app-collaborators",template:n(691),styles:[n(665)]}),s("design:paramtypes",["function"==typeof(c="undefined"!=typeof o.a&&o.a)&&c||Object])],t);var e,c}()},485:function(t,e,n){"use strict";var r=n(0),o=n(19);n.d(e,"a",function(){return c});var i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this._cdService=t,this.isAdmin=!1,this.settingsUpdated=new r.G,this.viewRequestToRefreshSettings=new r.G,this.viewNotifyingOfProjectDeletion=new r.G}return t.prototype.ngOnInit=function(){this._projectId=this._cdService.getCurrentProjectId()},t.prototype.deleteProject=function(t){var e=this;this.isAdmin&&t==this.projectSettings.project_name&&this._cdService.deleteProject(t).subscribe(function(t){t.loginRequired?e._cdService.logout():t.success&&(console.log("Project deleted"),e.viewNotifyingOfProjectDeletion.emit())})},t.prototype.generateNewPublicAuthToken=function(t){var e=this;this.isAdmin&&t.value==this.projectSettings.public_auth_token&&this._cdService.generateNewPublicAuthToken(t.value).subscribe(function(n){n.loginRequired?e._cdService.logout():n.success&&(t.value="",e.settingsUpdated.emit())})},t.prototype.updateSettings=function(){this.settingsUpdated.emit()},t.prototype.resetAllProjectSettings=function(){this.viewRequestToRefreshSettings.emit()},t.prototype.saveAllProjectSettings=function(){var t=this,e=this._cdService.getCurrentProjectSettings();if(this.isAdmin){if(this._cdService.updateProjectSettings(this.projectSettings.project_name,this.projectSettings.max_cache_age,this.projectSettings.custom_css).subscribe(function(e){e.loginRequired?t._cdService.logout():t.settingsUpdated.emit()}),this._cdService.updateAdminSettings(this.projectSettings.update_origins,this.projectSettings.read_origins).subscribe(function(e){e.loginRequired?t._cdService.logout():t.settingsUpdated.emit()}),e.access_levels!=this.projectSettings.access_levels){for(var n=[],r=0,o=this.projectSettings.access_levels;r<o.length;r++)for(var i=o[r],s=0;s<e.access_levels.length;s++)e.access_levels[s].access_level_int==i.access_level_int&&e.access_levels[s].access_level_name!=i.access_level_name&&n.push(i);for(var c=0,a=n;c<a.length;c++){var l=a[c];this._updateAccessLevel(l.access_level_int,l.access_level_name)}}}else this._cdService.updateProjectSettings(this.projectSettings.project_name).subscribe(function(e){e.loginRequired?t._cdService.logout():t.settingsUpdated.emit()});if(e.collaborators!=this.projectSettings.collaborators){for(var u=[],p=0,d=this.projectSettings.collaborators;p<d.length;p++){var f=d[p];if(null!=f.user_id)for(var s=0;s<e.collaborators.length;s++)e.collaborators[s].user_id==f.user_id&&e.collaborators[s].access_level_int!=f.access_level_int&&u.push(f)}for(var h=0,v=u;h<v.length;h++){var g=v[h];this._updateCollaboratorAccessLevel(g,g.access_level_int)}}},t.prototype._updateAccessLevel=function(t,e){var n=this;null!=e&&e.length>0&&this._cdService.updateAccessLevel(t,e).subscribe(function(t){t.loginRequired?n._cdService.logout():t.success&&(console.log("Access level updated"),n.settingsUpdated.emit())})},t.prototype._updateCollaboratorAccessLevel=function(t,e){var n=this;t.access_level_int=e,this._cdService.updateCollaborator(t.user_id,e).subscribe(function(t){t.loginRequired?n._cdService.logout():t.success&&(console.log("Collaborator updated!!"),n.settingsUpdated.emit())})},i([n.i(r.w)(),s("design:type",Boolean)],t.prototype,"isAdmin",void 0),i([n.i(r.w)(),s("design:type",Object)],t.prototype,"projectSettings",void 0),i([n.i(r.T)(),s("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"settingsUpdated",void 0),i([n.i(r.T)(),s("design:type","function"==typeof(c="undefined"!=typeof r.G&&r.G)&&c||Object)],t.prototype,"viewRequestToRefreshSettings",void 0),i([n.i(r.T)(),s("design:type","function"==typeof(a="undefined"!=typeof r.G&&r.G)&&a||Object)],t.prototype,"viewNotifyingOfProjectDeletion",void 0),t=i([n.i(r.U)({selector:"app-settings-view",template:n(692),styles:[n(666)]}),s("design:paramtypes",["function"==typeof(l="undefined"!=typeof o.a&&o.a)&&l||Object])],t);var e,c,a,l}()},486:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){}return t.prototype.ngOnInit=function(){this._currentDate=new Date},t=o([n.i(r.U)({selector:"app-footer",template:n(693),styles:[n(667)]}),i("design:paramtypes",[])],t)}()},487:function(t,e,n){"use strict";var r=n(0),o=n(19);n.d(e,"a",function(){return c});var i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this._cdService=t,this.requestToLogout=new r.G}return t.prototype.ngOnInit=function(){var t=this;this._cdService.getLoginUrl().subscribe(function(e){null!=e&&(t._loginUrl=e.loginUrl)})},t.prototype.logoutClicked=function(){this.requestToLogout.emit()},i([n.i(r.w)(),s("design:type",Object)],t.prototype,"user",void 0),i([n.i(r.w)(),s("design:type",String)],t.prototype,"pageTitle",void 0),i([n.i(r.T)(),s("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"requestToLogout",void 0),t=i([n.i(r.U)({selector:"app-header",template:n(694),styles:[n(668)]}),s("design:paramtypes",["function"==typeof(c="undefined"!=typeof o.a&&o.a)&&c||Object])],t);var e,c}()},488:function(t,e,n){"use strict";var r=n(0);n.d(e,"a",function(){return s});var o=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){this.requestToDismissWarning=new r.G,this._secondsRemaining=0}return t.prototype.ngOnChanges=function(t){t.minutesRemaining&&(this._secondsRemaining=Math.floor(this.minutesRemaining%1*60),this.minutesRemaining=Math.floor(this.minutesRemaining))},t.prototype.dismissWarning=function(){this.requestToDismissWarning.emit()},o([n.i(r.w)(),i("design:type",Number)],t.prototype,"minutesRemaining",void 0),o([n.i(r.w)(),i("design:type",Boolean)],t.prototype,"sessionExpired",void 0),o([n.i(r.T)(),i("design:type","function"==typeof(e="undefined"!=typeof r.G&&r.G)&&e||Object)],t.prototype,"requestToDismissWarning",void 0),t=o([n.i(r.U)({selector:"app-timeout",template:n(695),styles:[n(669)]}),i("design:paramtypes",[])],t);var e}()},489:function(t,e,n){"use strict";var r=n(0),o=n(307);n.d(e,"a",function(){return c});var i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this._ddPipe=t,this._months=["Jan","Feb","Mar","Apr","May","Jun","July","Aug","Sept","Oct","Nov","Dec"]}return t.prototype.transform=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!0);var r=new Date(t),o="",i=this._ddPipe.transform(r.getDate());if(e){var s=this._ddPipe.transform(r.getMonth()+1);o=i+"/"+s+"/"+r.getFullYear()}else o=i+" "+this._months[r.getMonth()]+" "+r.getFullYear();if(n){var c=r.getHours()<12?"am":"pm";o+=" "+this._ddPipe.transform(r.getHours())+":"+this._ddPipe.transform(r.getMinutes())+c}return o},t=i([n.i(r.p)({name:"customDate"}),s("design:paramtypes",["function"==typeof(e="undefined"!=typeof o.a&&o.a)&&e||Object])],t);var e}()},490:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={production:!0}},491:function(t,e,n){"use strict";var r=n(505),o=(n.n(r),n(498)),i=(n.n(o),n(494)),s=(n.n(i),n(500)),c=(n.n(s),n(499)),a=(n.n(c),n(497)),l=(n.n(a),n(496)),u=(n.n(l),n(504)),p=(n.n(u),n(493)),d=(n.n(p),n(492)),f=(n.n(d),n(502)),h=(n.n(f),n(495)),v=(n.n(h),n(503)),g=(n.n(v),n(501)),m=(n.n(g),n(506)),y=(n.n(m),n(723));n.n(y)},644:function(t,e){t.exports=""},645:function(t,e){t.exports="textarea{\r\n    min-height:200px;\r\n}"},646:function(t,e){t.exports=""},647:function(t,e){t.exports=""},648:function(t,e){t.exports=""},649:function(t,e){t.exports="th:nth-child(1), td:nth-child(1){width:30%;}\r\nth:nth-child(2), td:nth-child(2){width:20%;}\r\nth:nth-child(3), td:nth-child(3){width:20%;}\r\nth:nth-child(4), td:nth-child(4){width:20%;}\r\nth:nth-child(5), td:nth-child(5){width:10%;}\r\n\r\nh3{\r\n    display:inline-block;\r\n}\r\n\r\ntable{\r\n    background-color:white;\r\n}\r\n\r\n.button.template{\r\n    text-align:left;\r\n    background-color:#0a2f42;\r\n    color:#FFF;\r\n    padding:3%;\r\n    width:100%;\r\n    margin-bottom:1%;\r\n}\r\n\r\n.tableHead{\r\n    margin-top:3%;\r\n}\r\n\r\n.scrollable{\r\n    max-height:400px;\r\n    max-height:60vh;\r\n}\r\n\r\n.container-backgroud{\r\n    margin-top:1%;\r\n}"},650:function(t,e){t.exports=""},651:function(t,e){t.exports=":host{\r\n    display:block;\r\n    background-color:#8fb7cc;\r\n    padding:0 1% 2% 1%;\r\n    min-height:80vh;\r\n}\r\na{\r\n    text-decoration:none;\r\n    color:initial;\r\n}"},652:function(t,e){t.exports="nav{\r\n    clear:both;\r\n}\r\nnav ul{\r\n    list-style:none;\r\n    display:-webkit-box;\r\n    display:-ms-flexbox;\r\n    display:flex;\r\n    margin:0;\r\n    padding:0;\r\n}\r\n\r\nnav ul li{\r\n    cursor:pointer;\r\n    box-sizing:border-box;\r\n    display:inline-block;\r\n    padding:1%;\r\n    background-color:#0a2f42;\r\n    color:#fff;\r\n    text-align:center;\r\n    -webkit-box-flex:1;\r\n        -ms-flex:1;\r\n            flex:1;\r\n    margin-right:5px;\r\n}"},653:function(t,e){t.exports="textarea{\r\n    min-height:250px;\r\n    width:99%;\r\n}\r\n.right{\r\n    float:right;\r\n}"},654:function(t,e){t.exports="textarea{\r\n    width:100%;\r\n}\r\ninput, textarea{\r\n    border:1px solid #777;\r\n}\r\n\r\n[disabled]{\r\n    background-color:white !important;\r\n    color:initial !important;\r\n}"},655:function(t,e){t.exports=".collection, .subCollection{\r\n    display:block;\r\n}\r\n.subCollection{\r\n    margin-left:4%;\r\n}"},656:function(t,e){t.exports=".collectionTab{\r\n    padding:7% 1%;\r\n    color:#0a2f42;\r\n    background-color:white;\r\n    text-align:left;\r\n    border:1px solid #0a2f42;\r\n}\r\n.collectionTab.padding{\r\n    padding-left:8%;\r\n}\r\n.collectionTab.active{\r\n    background-color:#0a2f42;\r\n    color:white;\r\n}\r\n.col-2-12{\r\n    padding-left:0;\r\n}\r\n\r\n"},657:function(t,e){t.exports=""},658:function(t,e){t.exports='input[type="file"]{\r\n    width:0px;\r\n    height:0px;\r\n    visibility:hidden;\r\n}\r\n\r\nimg{\r\n    width:100px;\r\n    min-height:80px;\r\n    height:auto;\r\n    vertical-align:top;\r\n    border:1px solid black;\r\n}\r\nimg[src="null"]{\r\n    display:none;\r\n}\r\n\r\n:host.static app-media-item-gallery.visible{\r\n    position:static;\r\n    width:50%;\r\n}\r\n'},659:function(t,e){t.exports="label{\r\n    display:block;\r\n}\r\n.wysiwyg-input{\r\n    min-height:200px;\r\n    resize:vertical;\r\n    overflow-y:scroll;\r\n    background-color:white;\r\n}"},660:function(t,e){t.exports=""},661:function(t,e){t.exports="th:nth-child(1), td:nth-child(1){width:10%;}\r\nth:nth-child(2), td:nth-child(2){width:20%;}\r\nth:nth-child(3), td:nth-child(3){width:40%;}\r\nth:nth-child(4), td:nth-child(4){width:20%;}\r\nth:nth-child(5), td:nth-child(5){width:10%;}\r\n\r\n.scrollable{\r\n    max-height:200px;\r\n}\r\n\r\ntextarea{\r\n    min-height:200px;\r\n}\r\n\r\ntable{\r\n    background-color:white;\r\n}\r\n\r\n.button.cms.bottom-tabs{\r\n    margin-bottom:-2px;\r\n}";
},662:function(t,e){t.exports=":host{\r\n    position:absolute;\r\n    background-color:white;\r\n    width:100%;\r\n    height:210px;\r\n    border:1px solid #010a4f;\r\n    overflow-y:scroll;\r\n    display:block;\r\n}\r\n:host.visible{\r\n    visibility:visible;\r\n}\r\n:host.hidden{\r\n    visibility:hidden;\r\n}\r\n.button.cms.disabled{\r\n    opacity:0.5;\r\n}"},663:function(t,e){t.exports=":host{\r\n    display:inline-block;\r\n}\r\nimg{\r\n    box-sizing:border-box;\r\n    min-height:100px;\r\n    width:100%;\r\n    cursor:pointer;\r\n    border:2px solid #000;\r\n}"},664:function(t,e){t.exports="table{\r\n    background-color:white;\r\n}"},665:function(t,e){t.exports="table{\r\n    background-color:white;\r\n}"},666:function(t,e){t.exports="textarea.customCss{\r\n    height:160px;\r\n}\r\n:host > .row{\r\n    border-bottom:2px solid #0a2f42;\r\n    padding-bottom:3%;\r\n}\r\n.bottom-tabs{\r\n    border-bottom:1px solid #010a4f !important;\r\n}"},667:function(t,e){t.exports=":host > div{\r\n    text-align:center;\r\n    width:100%;\r\n    background-color:#FFF;\r\n    margin:0;\r\n    padding:1%;\r\n}\r\n\r\n:host.loggedOut{\r\n    position:absolute;\r\n    bottom:0;\r\n    width:100%;\r\n}"},668:function(t,e){t.exports=":host > div{\r\n    background-color:#fff;\r\n    color:#0a2f42;\r\n}\r\n:host.loggedIn > div{\r\n    background-color:#fff;\r\n    color:#0a2f42;\r\n}\r\n\r\nh1{\r\n    margin:1% 0 1% 2%;\r\n    display:inline-block;\r\n}\r\nimg{\r\n    width:50px;\r\n    vertical-align:bottom;\r\n    height:auto;\r\n}\r\n.button{\r\n    margin-top:6px;\r\n    padding:2% 4%;\r\n    color:#fff;\r\n    background-color:#1773a2;\r\n    text-shadow:black 1px 1px;\r\n    font-size:1em;\r\n}\r\n.row{\r\n    margin:0;\r\n}\r\n.right{\r\n    float:right;\r\n    padding-right:0;\r\n}"},669:function(t,e){t.exports=":host{\r\n    display:block;\r\n    position:fixed;\r\n    width:100%;\r\n    top:50px;\r\n    text-align:center;\r\n}\r\n\r\n:host > div{\r\n    width:50%;\r\n    border:4px solid white;\r\n    margin:0 auto;\r\n    padding:5% 2%;\r\n    background-color:#1773a2;\r\n}\r\n\r\n#warning{\r\n    font-size:1.5em;\r\n    color:white;\r\n}\r\nbutton{\r\n    margin-top:4%;\r\n    padding:2% 4%;\r\n}"},670:function(t,e){t.exports='<app-header\r\n    [user]="user"\r\n    [pageTitle]="pageTitle"\r\n    (requestToLogout)="logout()"\r\n    [class]="user != null ? \'loggedIn\' : \'loggedOut\'"></app-header>\r\n\r\n    <app-cms \r\n        *ngIf="user != null"\r\n        (requestToUpdatePageTitle)="updatePageTitle($event)"\r\n        (loginRequired)="loginRequired($event)">\r\n    </app-cms>\r\n<app-footer\r\n    [class]="user != null ? \'loggedIn\' : \'loggedOut\'"></app-footer>\r\n<app-timeout\r\n    *ngIf="sessionMinutesRemaining > -1 && (sessionExpired || _sessionWarningDismissed == false)"\r\n    (requestToDismissWarning)="requestToDismissTimeoutWarning()"\r\n    [minutesRemaining]="sessionMinutesRemaining"\r\n    [sessionExpired]="sessionExpired">\r\n</app-timeout>\r\n'},671:function(t,e){t.exports='<app-cms-navigation\r\n\t[userAccessLevel]="1"\r\n\t(requestToChangeView)="changeView($event)"></app-cms-navigation>\r\n<app-errors\r\n\t[errors]="errors"\r\n\t(requestToDismissErrors)="requestToDismissErrors($event)"></app-errors>\r\n<div class="row container-background">\r\n\t<app-structure-view\r\n\t\t*ngIf="_view == \'structure\'"\r\n\t\t[projectStructure]="projectStructure"\r\n\t\t(viewRequestToSaveStructure)="viewRequestToSaveStructure($event)"\r\n\t\t(viewRequestToResetStructure)="viewRequestToResetStructure()">\r\n\t</app-structure-view>\r\n\r\n\t<app-content-view\r\n\t\t*ngIf="_view == \'content\'"\r\n\t\t[userAccessLevel]="1"\r\n\t\t[customCss]="projectSettings.custom_css"\r\n\t\t[projectStructure]="projectStructure"\r\n\t\t[(projectContent)]="projectContent"\r\n\t\t[projectAccessLevels]="projectSettings.access_levels"\r\n\t\t(viewRequestToSaveContent)="viewRequestToSaveContent($event)"\r\n\t\t(viewRequestToResetContent)="viewRequestToResetContent()">\r\n\t</app-content-view>\r\n\r\n\t<app-history-view\r\n\t\t*ngIf="_view == \'history\'"\r\n\t\t[projectStructureHistory]="projectStructureHistory"\r\n\t\t[projectContentHistory]="projectContentHistory"\r\n\t\t(viewRequestToSaveStructure)="viewRequestToSaveStructure($event)"\r\n\t\t(viewRequestToSaveContent)="viewRequestToSaveContent($event)">\r\n\t</app-history-view>\r\n\r\n\t<app-settings-view\r\n\t\t*ngIf="_view == \'settings\'"\r\n\t\t[isAdmin]="true"\r\n\t\t[(projectSettings)]="projectSettings"\r\n\t\t(settingsUpdated)="viewRequestToRefreshSettings($event)"\r\n\t\t(viewRequestToRefreshSettings)="viewRequestToRefreshSettings($event)"\r\n\t\t(viewNotifyingOfProjectDeletion)="viewNotifyingOfProjectDeletion($event)">\r\n\t</app-settings-view>\r\n</div>'},672:function(t,e){t.exports='<div class="row">\n  <app-history-display\n    [history]="projectStructureHistory"\n    [historyOf]="\'structure\'"\n    [showPreview]="true"\n    (revertToCommit)="revertToCommit($event)">\n  </app-history-display>\n</div>\n\n<div class="row">\n  <app-history-display\n    [history]="projectContentHistory"\n    [historyOf]="\'content\'"\n    [showPreview]="true"\n    (revertToCommit)="revertToCommit($event)">\n  </app-history-display>\n</div>'},673:function(t,e){t.exports='<div class="col-6-12">\r\n  <h2>Project Structure</h2>\r\n  <app-code-editor\r\n    [codeJson]="projectStructureJson"\r\n    (codeUpdated)="codeUpdated($event)"\r\n    (requestToResetProjectStructure)="resetProjectStructure()"\r\n    (requestToSaveProjectStructure)="saveProjectStructure($event)">\r\n  </app-code-editor>\r\n</div>\r\n<div class="col-6-12">\r\n  <h2>Input Preview</h2>\r\n  <div *ngIf="projectStructure != null">\r\n    <app-content-editor\r\n      [viewContent]="false"\r\n      [viewOnly]="false"\r\n      [projectStructure]="projectStructure"\r\n      (structureCollectionTabsReordered)="structureCollectionTabsReordered($event)">\r\n    </app-content-editor>\r\n  </div>\r\n</div>'},674:function(t,e){t.exports='<app-cms-navigation\r\n\t*ngIf="userAccessLevel == 2"\r\n\t[userAccessLevel]="userAccessLevel"\r\n\t(requestToChangeView)="changeView($event)"></app-cms-navigation>\r\n<app-errors\r\n\t[errors]="errors"\r\n\t(requestToDismissErrors)="requestToDismissErrors($event)"></app-errors>\r\n<div class="row container-background">\r\n\t<app-content-view\r\n\t\t*ngIf="_view == \'content\'"\r\n\t\t[userAccessLevel]="userAccessLevel"\r\n\t\t[customCss]="customCss"\r\n\t\t[projectStructure]="projectStructure"\r\n\t\t[(projectContent)]="projectContent"\r\n\t\t[projectAccessLevels]="projectSettings != null ? projectSettings.access_levels : []"\r\n\t\t(viewRequestToSaveContent)="viewRequestToSaveContent($event)"\r\n\t\t(viewRequestToResetContent)="viewRequestToResetContent()">\r\n\t</app-content-view>\r\n\t\r\n\t<ng-container *ngIf="userAccessLevel == 2">\r\n\t\t<app-history-display\r\n\t\t\t*ngIf="_view == \'history\'"\r\n\t\t\t[history]="projectContentHistory"\r\n\t\t\t[historyOf]="\'content\'"\r\n\t\t\t[showPreview]="false"\r\n\t\t\t(revertToCommit)="revertToCommit($event)"\r\n\t\t\t(previewCommit)="previewCommit($event)">\r\n\t\t</app-history-display>\r\n\r\n\t\t<app-settings-view\r\n\t\t\t*ngIf="_view == \'settings\'"\r\n\t\t\t[(projectSettings)]="projectSettings"\r\n\t\t\t(settingsUpdated)="viewRequestToRefreshSettings($event)"\r\n\t\t\t(viewRequestToRefreshSettings)="viewRequestToRefreshSettings($event)">\r\n\t\t</app-settings-view>\r\n\t</ng-container>\r\n</div>\r\n'},675:function(t,e){t.exports='<button\n  (click)="refreshUserProjects()"\n  class="button cms top-tabs">Refresh from Server</button>\n<div class="row container-background">\n  <div class="col-8-12">\n    <div *ngIf="_userProjects != null && _userProjects.length > 0">\n      <div class="tableHead">\n        <table>\n          <thead>\n            <tr>\n              <th>Project Name</th>\n              <th>Access Level</th>\n              <th>Last Modified By</th>\n              <th>Last Modified On</th>\n              <th>Options</th>\t\t\t\n            </tr>\n          </thead>\n        </table>\n      </div>\n\n      <div class="scrollable">\n        <table>\n          <tbody>\n            <tr *ngFor="let project of _userProjects">\n              <td>{{project.project_name}}</td>\n              <td>{{project.access_level_name}}</td>\n              <td>{{project.last_modified_by}}</td>\n              <td>{{project.last_modified_on != null ? (project.last_modified_on | customDate : false : true) : "&nbsp;"}}</td>\n              <td><button\n                  class="button cms small"\n                  (click)="editProject(project.project_id, project.project_name, project.access_level_int)">{{project.access_level_int == 3 ? "View" : "Edit"}}</button></td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n  <div class="col-4-12">\n    <h2>Create a New Project</h2>\n    <h3>New Project Name</h3>\n    <input #pnInput type="text">\n    \n    <h3>Templates</h3>\n    <span class="templates">\n      <button (click)="createNewProject(pnInput)" class="button template">No Template</button>\n      <button (click)="createNewProject(pnInput, \'website_template\')" class="button template">Website Template</button>\n      <button (click)="createNewProject(pnInput, \'mediaitems_template\')" class="button template">Media Items Template</button>\n    </span>\n  </div>\n</div>'},676:function(t,e){t.exports='<app-content-view\r\n  [userAccessLevel]="3"\r\n  [projectContent]="projectContent"\r\n  [projectStructure]="projectStructure"\r\n  [customCss]="customCss"\r\n  [viewOnly]="true"></app-content-view>\r\n'},677:function(t,e){t.exports='<ng-container *ngIf="_projectId == null && userAccessLevel == null">\r\n    <app-user-projects\r\n        (viewProject)="viewProject($event)"\r\n        (viewLoginRequired)="viewLoginRequired($event)"></app-user-projects>\r\n</ng-container>\r\n\r\n<ng-container *ngIf="_projectId != null && userAccessLevel != null">\r\n    <button (click)="refreshProject()" class="button cms top-tabs">Refresh from Server</button>\r\n    <button (click)="viewUserProjects()" class="button cms top-tabs">Back to all Projects</button>\r\n    <a\r\n        *ngIf="userAccessLevel == 1"\r\n        [href]="\'./../feeds/\' + _projectId"\r\n        target="_blank"\r\n        class="button cms top-tabs">View JSON</a>\r\n    <app-cms-admin\r\n        *ngIf="userAccessLevel == 1"\r\n        [errors]="errors"\r\n        [(projectStructure)]="projectStructure"\r\n        [(projectContent)]="projectContent"\r\n        [projectStructureHistory]="projectStructureHistory"\r\n        [projectContentHistory]="projectContentHistory"\r\n        [(projectSettings)]="projectSettings"\r\n        (adminRequestToSaveStructure)="saveProjectStructure($event)"\r\n        (adminRequestToResetStructure)="resetProjectStructure()"\r\n        (adminRequestToSaveContent)="saveProjectContent($event)"\r\n        (adminRequestToResetContent)="resetProjectContent()"\r\n        (adminRequestToRefreshSettings)="loadProjectSettings()"\r\n        (adminNotifyingOfProjectDeletion)="projectDeleted()"\r\n        (adminRequestToDismissErrors)="dismissErrors()">\r\n    </app-cms-admin>\r\n    <app-cms-editor\r\n        *ngIf="userAccessLevel == 2 || userAccessLevel > 3"\r\n        [errors]="errors"\r\n        [userAccessLevel]="userAccessLevel"\r\n        [(projectContent)]="projectContent"\r\n        [projectStructure]="projectStructure"\r\n        [(projectSettings)]="projectSettings"\r\n        [projectContentHistory]="projectContentHistory"\r\n        [customCss]="projectSettings != null ? projectSettings.custom_css : \'\'"\r\n        (editorRequestToSaveContent)="saveProjectContent($event)"\r\n        (editorRequestToResetContent)="resetProjectContent()"\r\n        (editorRequestToRefreshSettings)="loadProjectSettings()"\r\n        (editorRequestToDismissErrors)="dismissErrors()">\r\n    </app-cms-editor>\r\n    <app-cms-view-only\r\n        *ngIf="userAccessLevel == 3"\r\n        [projectContent]="projectContent"\r\n        [projectStructure]="projectStructure"\r\n        [customCss]="projectSettings != null ? projectSettings.custom_css : \'\'">\r\n    </app-cms-view-only>\r\n</ng-container>'},678:function(t,e){t.exports='<div class="row">\n\t<nav>\n\t\t<ul [class]="userAccessLevel == 1 ? \'admin\' : \'editor\'">\n\t\t\t<li *ngIf="userAccessLevel == 1" (click)="changeView(\'structure\')">Structure</li>\n\t\t\t<li (click)="changeView(\'content\')">Content</li>\n\t\t\t<li (click)="changeView(\'history\')">Project History</li>\n\t\t\t<li *ngIf="userAccessLevel <= 2" (click)="changeView(\'settings\')">Project Settings</li>\n\t\t</ul>\n\t</nav>\n</div>\n'},679:function(t,e){t.exports='<div>\n  <button\n    (click)="formatJsonClicked()"\n    class="button cms bottom-tabs">Format JSON</button>\n  <button\n    (click)="resetProjectStructureClicked()"\n    class="button cms bottom-tabs">Reset</button>\n  <button\n    (click)="saveProjectStructureClicked()"\n    class="button cms bottom-tabs">Save</button>\n  <label class="right">Commit Message:\n    <input\n      type="text"\n      [(ngModel)]="_commitMessage">\n  </label>\n<textarea\n  [(ngModel)]="codeJson">\n</textarea>\n'},680:function(t,e){t.exports='<ng-container *ngIf="itemStructure != null && itemStructure.attributes != null">\r\n  <br *ngIf="itemStructure.input_type == \'textarea\'">\r\n  <label>{{itemName | title}} {{itemStructure.attributes.required == "required" ? \'*\' : \'\'}}\r\n    <ng-container *ngIf="itemStructure.type != \'html\'">\r\n      <input\r\n        *ngIf="(itemStructure.input_type == null || itemStructure.input_type == \'input\') && itemStructure.attributes.type != \'file\'"\r\n        [type]="itemStructure.attributes.type != null ? itemStructure.attributes.type : \'text\'"\r\n        [(ngModel)]="itemContent"\r\n        (change)="contentChanged($event)"\r\n        [disabled]="viewOnly"\r\n        [id]="itemStructure.attributes.id != null ? itemStructure.attributes.id : \'\'"\r\n        [class]="\'contentInput\' + (itemStructure.attributes.class != null ? \' \' + itemStructure.attributes.class : \'\')"\r\n        [required]="itemStructure.attributes.required != null && itemStructure.attributes.required"\r\n        [max]="itemStructure.attributes.max != null ? itemStructure.attributes.max : \'\'"\r\n        [min]="itemStructure.attributes.min != null ? itemStructure.attributes.min : \'\'"\r\n        [maxlength]="itemStructure.attributes.maxlength != null ? itemStructure.attributes.maxlength : \'\'"\r\n        [attr.data-name]="encapsulationPath"\r\n        [attr.data-validate]="viewContent && viewOnly == false"\r\n        appFormControl>\r\n\r\n      <textarea\r\n        *ngIf="itemStructure.input_type == \'textarea\'"\r\n        [(ngModel)]="itemContent"\r\n        (change)="contentChanged($event)"\r\n        [disabled]="viewOnly"\r\n        [id]="itemStructure.attributes.id != null ? itemStructure.attributes.id : \'\'"\r\n        [class]="\'contentInput\' + (itemStructure.attributes.class != null ? \' \' + itemStructure.attributes.class : \'\')"\r\n        [required]="itemStructure.attributes.required != null && itemStructure.attributes.required"\r\n        [maxlength]="itemStructure.attributes.maxlength != null ? itemStructure.attributes.maxlength : \'\'"\r\n        [attr.data-name]="encapsulationPath"\r\n        [attr.data-validate]="viewContent && viewOnly == false"\r\n        appFormControl>\r\n      </textarea>\r\n\r\n      <ng-container *ngIf="itemStructure.input_type != null && itemStructure.input_type == \'select\'">\r\n        <select\r\n          *ngIf="viewOnly == false"\r\n          [(ngModel)]="itemContent"\r\n          (change)="contentChanged($event)"\r\n          [id]="itemStructure.attributes.id != null ? itemStructure.attributes.id : \'\'"\r\n          [class]="\'contentInput\' + (itemStructure.attributes.class != null ? \' \' + itemStructure.attributes.class : \'\')"\r\n          [required]="itemStructure.attributes.required != null && itemStructure.attributes.required"\r\n          [attr.data-name]="encapsulationPath"\r\n          [attr.data-validate]="viewContent && viewOnly == false"\r\n          appFormControl>\r\n          <ng-container *ngIf="itemStructure.attributes != null && itemStructure.attributes.options != null">\r\n            <option\r\n              *ngFor="let option of itemStructure.attributes.options"\r\n              [value]="option"\r\n              [selected]="itemContent != null && viewContent != false && option == itemContent">\r\n              {{option | title}}\r\n            </option>\r\n          </ng-container>\r\n        </select>\r\n        <input\r\n          *ngIf="viewOnly"\r\n          [value]="itemContent"\r\n          disabled="true">\r\n      </ng-container>\r\n    </ng-container>\r\n  </label>\r\n  \r\n<span *ngIf="_contentError != null && _contentError.length > 0" class="error">\r\n  {{_contentError}}\r\n</span>\r\n\r\n  <app-wysiwyg-html\r\n    *ngIf="itemStructure.type == \'html\'"\r\n    [viewContent]="viewContent"\r\n    [viewOnly]="viewOnly"\r\n    [itemContent]="itemContent"\r\n    [itemAttributes]="itemStructure.attributes"\r\n    [encapsulationPath]="encapsulationPath"\r\n    (wysiwygContentChanged)="contentChanged($event)"></app-wysiwyg-html>\r\n  <app-file-upload\r\n    *ngIf="itemStructure.attributes.type == \'file\'"\r\n    class="static"\r\n    [viewOnly]="viewOnly"\r\n    [viewContent]="viewContent"\r\n    [(itemContent)]="itemContent"\r\n    [itemAttributes]="itemStructure.attributes"\r\n    [encapsulationPath]="encapsulationPath"\r\n    (fileChanged)="contentChanged($event)">\r\n  </app-file-upload>\r\n</ng-container>'},681:function(t,e){t.exports='<h3 *ngIf="subCollection">{{collection | title}}</h3>\r\n<br *ngIf="projectStructure != null && (projectStructure[collection] != null && (projectStructure[collection].input_type == \'textarea\' || projectStructure[collection].type == \'html\'))">\r\n<div [class]="subCollection ? \'subCollection \' + collection : \'inline\'">\r\n  <ng-container *ngIf="projectStructure != null && projectStructure[collection] != null">\r\n    <ng-container *ngIf="projectStructure[collection] != null && projectStructure[collection].items == null && encapsulationPath != null">\r\n      <app-collection-item\r\n        *ngIf="userAccessLevel <= 2 || projectStructure[collection].no_access == null || (projectStructure[collection].no_access != null && projectStructure[collection].no_access.indexOf(userAccessLevel) < 0)"\r\n        [class]="encapsulationPath.split(\'/\').join(\' \')"\r\n        [encapsulationPath]="encapsulationPath"\r\n        [itemName]="collection"\r\n        [itemStructure]="projectStructure[collection]"\r\n        [itemContent]="projectContent != null && projectContent[collection] != null ? projectContent[collection] : null"\r\n        [viewContent]="viewContent"\r\n        [viewOnly]="viewOnly"\r\n        (itemContentChanged)="collectionContentChanged($event)">\r\n      </app-collection-item>\r\n    </ng-container>\r\n    \r\n    <ng-container *ngIf="projectStructure[collection] != null && projectStructure[collection].items != null">\r\n      \r\n      <ng-container *ngIf="projectStructure[collection].type == \'object\'">\r\n        <ng-container *ngFor="let collectionItemName of projectStructure[collection].items | keyValArray : \'keys\'">\r\n          <app-collection\r\n            *ngIf="userAccessLevel <= 2 || projectStructure[collection].items[collectionItemName].no_access == null || (projectStructure[collection].items[collectionItemName].no_access != null && projectStructure[collection].items[collectionItemName].no_access.indexOf(userAccessLevel) < 0)"\r\n            [encapsulationPath]="encapsulationPath + \'/\' + collectionItemName"\r\n            [subCollection]="projectStructure[collection].items[collectionItemName].type == \'object\' || projectStructure[collection].items[collectionItemName].type == \'array\'"\r\n            [collection]="collectionItemName"\r\n            [projectStructure]="projectStructure[collection].items"\r\n            [projectContent]="projectContent != null && projectContent[collection] != null ? projectContent[collection] : null"\r\n            [viewContent]="viewContent"\r\n            [viewOnly]="viewOnly"\r\n            (itemContentChanged)="itemContentChanged($event)"\r\n            (contentChanged)="collectionContentChanged($event)">\r\n          </app-collection>\r\n        </ng-container>\r\n      </ng-container>\r\n\r\n      <ng-container *ngIf="projectStructure[collection].type == \'array\'">\r\n        <ng-container *ngIf="projectContent != null && projectContent[collection] != null && viewContent">\r\n          <app-draggable-container\r\n            [content]="projectContent[collection]"\r\n            [contentEncapsulationPath]="encapsulationPath"\r\n            [contentType]="projectStructure[collection].type"\r\n            (contentReordered)="collectionContentChanged($event)">\r\n            <ng-container *ngFor="let index of projectContent[collection] | keyValArray : \'keys\'">\r\n              <div\r\n                *ngIf="userAccessLevel <= 2 || projectStructure[collection].no_access == null || (projectStructure[collection].no_access != null && projectStructure[collection].no_access.indexOf(userAccessLevel) < 0)"\r\n                class="collection"\r\n                [draggable]="viewOnly == false"\r\n                [attr.data-key]="index">\r\n                <ng-container *ngFor="let collectionItemName of projectStructure[collection].items | keyValArray : \'keys\'">\r\n                  <app-collection\r\n                    *ngIf="projectContent[collection][index] != null"\r\n                    [subCollection]="projectStructure[collection].items[collectionItemName].type == \'array\'"\r\n                    [encapsulationPath]="encapsulationPath + \'/\' + index + \'/\' + collectionItemName"\r\n                    [collection]="collectionItemName"\r\n                    [projectStructure]="projectStructure[collection].items"\r\n                    [projectContent]="projectContent[collection][index] != null ? projectContent[collection][index] : null"\r\n                    [viewContent]="viewContent"\r\n                    [viewOnly]="viewOnly"\r\n                    (itemContentChanged)="collectionContentChanged($event)"\r\n                    (contentChanged)="collectionContentChanged($event)">\r\n                  </app-collection>\r\n                </ng-container>\r\n                <button\r\n                  *ngIf="viewOnly == false"\r\n                  class="button cms small dark"\r\n                  (click)="deleteItem(encapsulationPath, index)">Delete</button>\r\n              </div>\r\n            </ng-container>\r\n          </app-draggable-container>\r\n        </ng-container>\r\n\r\n        <ng-container *ngIf="(projectContent == null || projectContent[collection] == null) && viewContent == false">\r\n          <ng-container *ngFor="let collectionItemName of projectStructure[collection].items | keyValArray : \'keys\'">\r\n            <ng-container *ngIf="projectStructure[collection].items[collectionItemName].type != \'object\' && projectStructure[collection].items[collectionItemName].type != \'array\'">\r\n                <app-collection\r\n                  [encapsulationPath]="projectStructure[collection].type == \'array\' ? encapsulationPath + \'/0/\' + collectionItemName : encapsulationPath + \'/\' + collectionItemName"\r\n                  [collection]="collectionItemName"\r\n                  [projectStructure]="projectStructure[collection].items"\r\n                  [viewContent]="viewContent"\r\n                  [viewOnly]="viewOnly"\r\n                  (itemContentChanged)="collectionContentChanged($event)"\r\n                  (contentChanged)="collectionContentChanged($event)">\r\n                </app-collection>\r\n            </ng-container>\r\n            \r\n            <ng-container *ngIf="projectStructure[collection].items[collectionItemName].type == \'object\'">\r\n              <app-collection\r\n                [encapsulationPath]="encapsulationPath + \'/\' + collectionItemName"\r\n                [subCollection]="true"\r\n                [collection]="collectionItemName"\r\n                [projectStructure]="projectStructure[collection].items"\r\n                [viewContent]="viewContent"\r\n                [viewOnly]="viewOnly"\r\n                (itemContentChanged)="collectionContentChanged($event)"\r\n                (contentChanged)="collectionContentChanged($event)">\r\n              </app-collection>\r\n            </ng-container>\r\n\r\n            <ng-container *ngIf="projectStructure[collection].items[collectionItemName].type == \'array\'">\r\n              <app-collection\r\n                [encapsulationPath]="encapsulationPath + \'/0/\' + collectionItemName"\r\n                [subCollection]="true"\r\n                [collection]="collectionItemName"\r\n                [projectStructure]="projectStructure[collection].items"\r\n                [viewContent]="viewContent"\r\n                [viewOnly]="viewOnly"\r\n                (itemContentChanged)="collectionContentChanged($event)"\r\n                (contentChanged)="collectionContentChanged($event)">\r\n              </app-collection>\r\n            </ng-container>\r\n          </ng-container>\r\n        </ng-container>\r\n\r\n        <button\r\n            *ngIf="viewOnly == false"\r\n            class="button cms small"\r\n            (click)="addNewItem(encapsulationPath, projectStructure[collection])"> Add {{collection | title}}</button>\r\n      </ng-container>\r\n\r\n    </ng-container>\r\n  </ng-container>\r\n</div>'},682:function(t,e){t.exports='<div *ngIf="projectStructure != null">\r\n  <ng-container *ngIf="viewContent && viewOnly == false">\r\n      <button\r\n        (click)="resetProjectContent()"\r\n        class="button cms bottom-tabs">Reset</button>\r\n      <button\r\n        (click)="saveProjectContent()"\r\n        class="button cms bottom-tabs">Save</button>\r\n      <label>Commit Message:\r\n        <input\r\n          type="text"\r\n          [(ngModel)]="_commitMessage">\r\n      </label>\r\n  </ng-container>\r\n<app-errors\r\n\t[errors]="_contentErrors | keyValArray : \'values\'"\r\n\t(requestToDismissErrors)="requestToDismissErrors($event)"></app-errors>\r\n  <div>\r\n    <div [class]="viewContent ? \'col-2-12\' : \'col-3-12\'">\r\n        <div *ngIf="projectStructure != null">\r\n          <app-draggable-container\r\n            [content]="projectStructure"\r\n            [contentEncapsulationPath]=""\r\n            [contentType]="object"\r\n            (contentReordered)="collectionTabsReordered($event)">\r\n            <ng-container *ngFor="let collection of projectStructure | keyValArray : \'keys\'">\r\n              <div *ngIf="userAccessLevel <= 2 || projectStructure[collection].no_access == null || (projectStructure[collection].no_access != null && projectStructure[collection].no_access.indexOf(userAccessLevel) < 0)"\r\n                [draggable]="viewContent == false"\r\n                [attr.data-key]="collection"\r\n                (click)="viewCollection(collection)"\r\n                [class]="(viewContent ? \'padding\' : \'\') + (collection === currentCollectionName ? \' active\' : \'\')  + \' collectionTab\'">{{collection | title}}\r\n              </div>\r\n            </ng-container>\r\n          </app-draggable-container>\r\n        </div>\r\n    </div>\r\n    <div [class]="viewContent ? \'col-10-12\' : \'col-9-12\'">\r\n      <ng-container *ngIf="currentCollectionName != null && (userAccessLevel <= 2 || projectStructure[currentCollectionName].no_access == null || (projectStructure[currentCollectionName].no_access != null && projectStructure[currentCollectionName].no_access.indexOf(userAccessLevel) < 0))">\r\n        <h2>{{currentCollectionName | title}}</h2>\r\n        <app-collection\r\n          [userAccessLevel]="userAccessLevel"\r\n          [topLevelCollection]="true"\r\n          [encapsulationPath]="currentCollectionName"\r\n          [collection]="currentCollectionName"\r\n          [projectContent]="projectContent"\r\n          [projectStructure]="projectStructure"\r\n          [viewContent]="viewContent"\r\n          [viewOnly]="viewOnly"\r\n          (contentChanged)="projectContentChanged($event)">\r\n        </app-collection>\r\n      </ng-container>\r\n    </div>\r\n  </div>\r\n</div>\r\n'},683:function(t,e){t.exports='<div class="row">\r\n  <div class="col-12-12">\r\n    <h2>Project Content</h2>\r\n    <div *ngIf="projectStructure != null">\r\n      <ng-container *ngIf="userAccessLevel == 1 || userAccessLevel == 2">\r\n        View As\r\n        <select\r\n          #viewAs\r\n          (change)="viewAsAccessLevelChange(viewAs.value)">\r\n          <ng-container *ngFor="let accessLevel of projectAccessLevels">\r\n            <option\r\n              *ngIf="accessLevel.access_level_int > 1 || (accessLevel.access_level_int == 1 && userAccessLevel == 1)"\r\n              [value]="accessLevel.access_level_int">\r\n              {{accessLevel.access_level_name}}\r\n            </option>\r\n          </ng-container>\r\n        </select>\r\n      </ng-container>\r\n      <app-content-editor\r\n        [userAccessLevel]="_viewAsAccessLevel"\r\n        [viewContent]="true"\r\n        [viewOnly]="viewOnly"\r\n        [(projectContent)]="projectContent"\r\n        [projectStructure]="projectStructure"\r\n        (requestToSaveProjectContent)="requestToSaveProjectContent($event)"\r\n        (requestToResetProjectContent)="requestToResetProjectContent()">\r\n      </app-content-editor>\r\n    </div>\r\n  </div>\r\n</div>'},684:function(t,e){t.exports='<div\r\n  *ngIf="_warning != null">{{_warning}}</div>\r\n<span *ngIf="_contentError != null && _contentError.length > 0" class="error">\r\n  {{_contentError}}\r\n</span>\r\n<input\r\n  *ngIf="viewOnly == false"\r\n  #fileInput\r\n  type="file"\r\n  class="fileInput"\r\n  (change)="fileInputChanged(fileInput)"\r\n  [attr.data-required]="itemAttributes != null && itemAttributes.required != null && itemAttributes.required ? true : false"\r\n  [attr.data-name]="encapsulationPath"\r\n  [attr.data-validate]="viewContent && viewOnly == false"\r\n  appFormControl>\r\n<button\r\n  *ngIf="viewOnly == false" \r\n  [id]="itemAttributes != null && itemAttributes.id != null ? itemAttributes.id : \'\'"\r\n  [class]="\'button cms small\' + (itemAttributes != null && itemAttributes.class != null ? \' \' + itemAttributes.class : \'\')"\r\n  (click)="openFileExplorer()">Upload an Image</button>\r\n<button\r\n  *ngIf="viewOnly == false" \r\n  (click)="toggleMediaItemGallery()" class="button cms small">Select Existing Image</button>\r\n<img\r\n  *ngIf="viewContent && itemContent != null && _mediaItemGalleryVisible == false"\r\n  [src]="itemContent">\r\n\r\n<app-media-item-gallery\r\n    [class]="_mediaItemGalleryVisible ? \'visible\' : \'hidden\'"\r\n    [numItemsPerPage]=9\r\n    [numItemsPerRow]=3\r\n    [visible]="_mediaItemGalleryVisible"\r\n    (closeButtonClicked)="hideMediaItemGallery()"\r\n    (mediaItemSelected)="mediaItemSelected($event)">\r\n</app-media-item-gallery>'},685:function(t,e){t.exports='<div>\r\n  <div [class]="viewContent ? \'col-8-12\' : \'col-12-12\'">\r\n    <div *ngIf="viewOnly == false">\r\n      <button (click)="addImage()" class="button cms bottom-tabs">Image</button>\r\n      <button (click)="addHeading(\'h1\')" class="button cms bottom-tabs">H1</button>\r\n      <button (click)="addHeading(\'h2\')" class="button cms bottom-tabs">H2</button>\r\n      <button (click)="addHeading(\'h3\')" class="button cms bottom-tabs">H3</button>\r\n      <button (click)="addLink()" class="button cms bottom-tabs">Hyperlink</button>\r\n      <button (click)="undoLastChange()" [disabled]="_lastChange == null" class="button cms bottom-tabs">Undo</button>\r\n      <button (click)="clearAllContent()" class="button cms bottom-tabs">Clear All</button>\r\n    </div>\r\n\r\n    <span *ngIf="_contentError != null && _contentError.length > 0" class="error">\r\n      {{_contentError}}\r\n    </span>\r\n\r\n    <div\r\n      *ngIf="viewContent && viewOnly == false"\r\n      #textareaInput\r\n      contenteditable="true"\r\n      (click)="updateCursorPosition()"\r\n      (change)="updateCursorPosition()"\r\n      (keyup)="updateCursorPosition()"\r\n      [class]="\'input wysiwyg-input\' + (itemAttributes != null && itemAttributes.class != null ? \' \' + itemAttributes.attributes.class : \'\')"\r\n      [attr.data-required]="itemAttributes.required != null && itemAttributes.required ? true : false"\r\n      [attr.data-maxlength]="itemAttributes.maxlength != null ? itemAttributes.maxlength : \'\'"\r\n      [attr.data-name]="encapsulationPath"\r\n      [attr.data-validate]="viewContent && viewOnly == false"\r\n      appFormControl>\r\n    </div>\r\n\r\n  </div>\r\n\r\n  <div \r\n    *ngIf="viewContent && viewOnly == false"\r\n    class="col-4-12">\r\n    <div *ngIf="_insertType == \'image\'">\r\n      <div class="row">\r\n        <h3>Image</h3>\r\n      </div>\r\n      <div class="row">\r\n        <label>Alt Text:\r\n          <input #altTextInput type="text">\r\n        </label>\r\n      </div>\r\n      <div class="row">\r\n        <app-file-upload\r\n          [viewContent]="viewContent"\r\n          [encapsulationPath]="encapsulationPath"\r\n          (fileChanged)="imageSelected($event)"></app-file-upload>\r\n      </div>\r\n      <div class="row">\r\n        <button (click)="insertImage(altTextInput)" class="button cms bottom-tabs bottom-border">Insert</button>\r\n        <button (click)="cancel()"  class="button cms bottom-tabs bottom-border">Cancel</button>\r\n      </div>\r\n    </div>\r\n\r\n    <div *ngIf="_insertType == \'heading\'">\r\n      <div class="row">\r\n        <h3>Heading {{_headingType}}</h3>\r\n      </div>\r\n      <div class="row">\r\n        <label>Heading Text\r\n          <input #hTextInput type="text">\r\n        </label>\r\n      </div>\r\n      <div class="row">\r\n        <button (click)="insertHeading(hTextInput)">Insert</button>\r\n        <button (click)="cancel()">Cancel</button>\r\n      </div>\r\n    </div>\r\n\r\n    <div *ngIf="_insertType == \'link\'">\r\n      <div class="row">\r\n        <h3>Hyperlink</h3>\r\n      </div>\r\n      <div class="row">\r\n        <label>Link Text\r\n          <input #linkTextInput type="text">\r\n        </label>\r\n        <label>Link To\r\n          <input #linkHrefInput type="text">\r\n        </label>\r\n      </div>\r\n      <div class="row">\r\n        <button (click)="insertLink(linkTextInput, linkHrefInput)">Insert</button>\r\n        <button (click)="cancel()">Cancel</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div\r\n  *ngIf="viewContent == false || viewOnly"\r\n  class="input wysiwyg-input">\r\n</div>';
},686:function(t,e){t.exports='<div\n\t*ngIf="errors != null && errors.length > 0"\n\tclass="row">\n\t<div class="col-12-12">\n\t\tErrors\n\t\t<ul>\n\t\t\t<li *ngFor="let error of errors">{{error}}</li>\n\t\t</ul>\n\t\t<button (click)="dismissErrors()">Close</button>\n\t</div>\n</div>'},687:function(t,e){t.exports='<h2 *ngIf="historyOf">{{historyOf | upperCamelCase }}History</h2>\n<div *ngIf="history != null" class="row">\n  <div [class]="showPreview ? \'col-8-12\' : \'col-12-12\'">\n    <div class="tableHead">\n      <table>\n        <thead>\n          <tr>\n            <th>Commit ID</th>\n            <th>Date</th>\n            <th>Changes</th>\n            <th>Made By</th>\n            <th>Options</th>\n          </tr>\n        </thead>\n      </table>\n    </div>\n    <div class="scrollable">\n      <table>\n        <tbody>\n          <tr\n            *ngFor="let commit of history"\n            [class]="_previewHistoryHash == commit.hash ? \'selected\' : \'\'">\n            <td>{{commit.hash | shortener : 6}}</td>\n            <td>{{commit.date | customDate : false : true}}</td>\n            <td>{{commit.message.split(" (HEAD")[0]}}</td>\n            <td>{{commit.author_name}}</td>\n            <td><button\n                  class="button cms small"\n                  (click)="preview(commit)">Preview</button></td>\n          </tr>\n        </tbody>\n      </table>  \n    </div>\n  </div>\n  <div *ngIf="showPreview" class="col-4-12">\n    <button (click)="clear()" class="button cms bottom-tabs">Clear Preview</button>\n    <button (click)="revert()" class="button cms bottom-tabs">Revert to this {{historyOf | upperCamelCase}}</button>\n    <textarea\n      [value]="_previewHistoryObject != null ? (_previewHistoryObject | customJson : \'stringify\') : \'\'">\n    </textarea>\n  </div>\n</div>'},688:function(t,e){t.exports='<div *ngIf="_mediaItems != null">\n  <h2>Available Images</h2>\n  <div class="row">\n    <button\n      (click)="hide()"\n      class="button cms small">Close</button>\n    <button\n      (click)="loadMediaItems()"\n      [class]="\'button cms small\' + (_mediaItemNextPageToken != null ? \'\' : \' disabled\')">Next</button>\n  </div>\n  <div>\n    <app-media-item\n        *ngFor="let mediaItem of _mediaItems"\n        [mediaItemUrl]="mediaItem.url"\n        [mediaItemName]="mediaItem.name"\n        (mediaItemClicked)="mediaItemClicked($event)"\n        [style.width]="((100 / numItemsPerRow) - 1) + \'%\'">\n    </app-media-item>\n  </div>\n</div>\n'},689:function(t,e){t.exports='<img\n  [src]="mediaItemUrl"\n  [title]="mediaItemName"\n  [alt]="mediaItemName"\n  (click)="onClick()">\n'},690:function(t,e){t.exports='<h3>Access Levels</h3>\n<div class="row">\n  <div class="col-6-12">\n    <h4>Project Access Levels</h4>\n    <table>\n      <thead>\n        <tr>\n          <th>Access Level Name</th>\n          <th>Access Level Int</th>\n          <th>In Use</th>\n          <th>Options</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor="let accessLevel of projectSettings.access_levels">\n          <td>\n            <input type="text" [(ngModel)]="accessLevel.access_level_name">\n          </td>\n          <td>\n            {{accessLevel.access_level_int}}\n          </td>\n          <td>{{accessLevel.in_use ? "Yes" : "No"}}</td>\n          <td>\n            <button\n              *ngIf="accessLevel.access_level_int > 3 && !accessLevel.in_use"\n              (click)="deleteAccessLevel(accessLevel.access_level_int)"\n              class="button cms small">Delete</button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <div class="col-6-12">\n    <h4>Add Access Level</h4>\n    <label>Access Level Name:\n      <input #aalLevelNameInput type="text">\n    </label>\n    <br>\n    <label>Access Level Int:\n      <input #aalLevelIntInput type="text">\n    </label>\n    <br>\n    <button (click)="addNewAccessLevel(aalLevelNameInput, aalLevelIntInput)" class="button cms small">Add New Access Level</button>\n  </div>\n</div>'},691:function(t,e){t.exports='<h3>Collaborators</h3>\n<div class="row">\n  <div class="col-6-12">\n    <h4>Project Collaborators</h4>\n    <table>\n      <thead>\n        <tr>\n          <th>User</th>\n          <th>Access Level</th>\n          <th>Options</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor="let collaborator of projectSettings.collaborators">\n          <td>{{collaborator.display_name != null ? collaborator.display_name : collaborator.email_address}}</td>\n          <td>\n            <select\n              #calInput\n              [(ngModel)]="collaborator.access_level_int">\n              <option\n                *ngFor="let accessLevel of projectSettings.access_levels"\n                [value]="accessLevel.access_level_int">\n                {{accessLevel.access_level_name}}\n              </option>\n            </select>\n          </td>\n          <td>\n            <button\n              *ngIf="_currentUserId != null && collaborator.user_id != _currentUserId"\n              (click)="deleteCollaborator(collaborator)"\n              class="button cms small">Delete</button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <div class="col-6-12">\n    <h4>Add Collaborator</h4>\n    <label>Email Address:\n      <input #acEmailInput type="text">\n    </label>\n    <br>\n    <label>Access Level\n      <select #acAccessInput>\n        <option\n          *ngFor="let accessLevel of projectSettings.access_levels"\n          [value]="accessLevel.access_level_int">\n          {{accessLevel.access_level_name}}\n        </option>\n      </select>\n    </label>\n    <br>\n    <button (click)="addCollaborator(acEmailInput, acAccessInput)" class="button cms small">Add Collaborator</button>\n  </div>\n</div>\n'},692:function(t,e){t.exports='<h2>Project Settings</h2>\n<button (click)="saveAllProjectSettings()" class="button cms bottom-tabs">Save All</button>\n<button (click)="resetAllProjectSettings()" class="button cms bottom-tabs">Reset All</button>\n\n<ng-container *ngIf="projectSettings != null">\n  <div class="row">\n    <h3>General</h3>\n\n    <div class="row">\n      <div [class]="isAdmin ? \'col-6-12\' : \'col-12-12\'">\n        <div class="row">\n          <label>Project Name:\n            <input #pnInput type="text" [(ngModel)]="projectSettings.project_name">\n          </label>\n        </div>\n\n        <div class="row" *ngIf="isAdmin">\n          <label>Maximum Content Cache Time (in milliseconds)\n            <input #pmcInput type="number" [(ngModel)]="projectSettings.max_cache_age">ms\n          </label>\n        </div>\n      </div>\n\n      <div class="col-6-12" *ngIf="isAdmin">\n        <div class="row">\n          <label>Custom Content Editor CSS\n            <textarea\n              #cssInput\n              class="customCss"\n              [(ngModel)]="projectSettings.custom_css">\n            </textarea>\n          </label>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="row" *ngIf="isAdmin">\n    <h3>Project Credentials</h3>\n    <div class="row">\n      <div class="col-6-12">\n        <strong>Project ID:</strong> {{_projectId}}<br>\n        <strong>Public Auth Token:</strong> {{projectSettings.public_auth_token}}\n      </div>\n      <div class="col-6-12">\n        <div class="row">\n          <label>Allowed Update Origins:\n            <textarea [(ngModel)]="projectSettings.update_origins"></textarea>\n          </label>\n        </div>\n\n        <div class="row">\n          <label>Allowed Read Origins:\n            <textarea [(ngModel)]="projectSettings.read_origins"></textarea>\n          </label>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class="row">\n    <app-collaborators\n      [projectSettings]="projectSettings"\n      (collaboratorsUpdated)="updateSettings()"></app-collaborators>\n  </div>\n  \n  <div class="row">\n    <app-access-levels\n      [projectSettings]="projectSettings"\n      (accessLevelsUpdated)="updateSettings()"></app-access-levels>\n  </div>\n\n  <div class="row" *ngIf="isAdmin">\n    <h3>Danger Zone</h3>\n    <div class="row">\n      <h4>Delete Project</h4>\n      <div class="row" >\n          <label>Project Name:\n            <input #pName type="text">\n          </label>\n          <button (click)="deleteProject(pName.value)" class="button cms small">Confirm Delete (can\'t undo)</button>\n      </div>\n      <h4>Generate New Public Auth Token</h4>\n      <div class="row">\n          <label>Current Auth Token:\n            <input #aToken type="text">\n          </label>\n          <button (click)="generateNewPublicAuthToken(aToken)" class="button cms small">Generate New Token (can\'t undo)</button>\n      </div>\n    </div>\n  </div>\n</ng-container>'},693:function(t,e){t.exports='<div class="copyright">\n  Copyright &copy; <a href="http://www.pigottlaura.com" target="_blank">Laura Pigott</a> {{_currentDate | date : "y"}}\n</div>\n'},694:function(t,e){t.exports='<div class="row">\r\n  <div class="col-6-12">\r\n    <img src="./assets/images/logo.png">\r\n    <h1>{{pageTitle}}</h1>\r\n  </div>\r\n  <div class="col-6-12 right">\r\n    <ng-container *ngIf="user != null" class="col-4-12 right">\r\n      <span>Welcome back {{user.displayName}}</span>\r\n      <img \r\n        *ngIf="user.profileImage != null"\r\n        [src]="user.profileImage + \'&sz=50\'">\r\n      <span\r\n        (click)="logoutClicked()"\r\n        class="button">Logout</span>\r\n    </ng-container>\r\n\r\n    <ng-container *ngIf="user == null">\r\n      <a\r\n        [href]="_loginUrl"\r\n        class="button">\r\n        Login\r\n      </a>\r\n    </ng-container>\r\n\r\n    <a href="./../documentation" target="_blank" class="button">\r\n      Documentation\r\n    </a>\r\n  </div>\r\n</div>'},695:function(t,e){t.exports='<div>\n  <div id="warning">\n    <ng-container *ngIf="sessionExpired">\n      Your session has expired.<br>\n      Please log in again to access your admin panel.\n    </ng-container>\n    <ng-container *ngIf="sessionExpired == false">\n      Your session will expire in {{minutesRemaining}} minute{{minutesRemaining == 1 ? \'\' : \'s\'}} and {{_secondsRemaining}} second{{_secondsRemaining == 1 ? \'\' : \'s\'}}.<br>\n      Please refresh or save your content to the server to remain logged in\n    </ng-container>\n  </div>\n  <button (click)="dismissWarning()" class="button cms small dark">Ok</button>\n</div>'},724:function(t,e,n){t.exports=n(354)}},[724]);